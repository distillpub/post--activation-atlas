'use strict';(function(){function C(){}function r(a,b){for(var c in b)a[c]=b[c];return a}function J(a,b){for(var c in b)a[c]=1;return a}function v(a){a.parentNode.removeChild(a)}function Mc(a){for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling)}function Aa(a,b){for(;a.firstChild;)b.appendChild(a.firstChild)}function jb(a,b){for(var c=0;c<a.length;c+=1)a[c]&&a[c].d(b)}function Z(){return document.createDocumentFragment()}function k(a){return document.createElement(a)}function aa(a){return document.createElementNS("http://www.w3.org/2000/svg",
a)}function n(a){return document.createTextNode(a)}function t(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function Nc(a){return""===a?void 0:+a}function q(a,b,c){a.style.setProperty(b,c)}function uf(a,b){"static"===getComputedStyle(a).position&&(a.style.position="relative");let c=document.createElement("object");c.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;");c.type="text/html";
let d;c.onload=()=>{d=c.contentDocument.defaultView;d.addEventListener("resize",b)};/Trident/.test(navigator.userAgent)?(a.appendChild(c),c.data="about:blank"):(c.data="about:blank",a.appendChild(c));return{cancel:()=>{d&&d.removeEventListener&&d.removeEventListener("resize",b);a.removeChild(c)}}}function pd(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}function vf(a,b){return a!=a?b==b:a!==b}function qd(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=
0;c<a.length;c+=1){var d=a[c];if(!d.__calling)try{d.__calling=!0,d.call(this,b)}finally{d.__calling=!1}}}function E(a){a._lock=!0;Nb(a._beforecreate);Nb(a._oncreate);Nb(a._aftercreate);a._lock=!1}function rd(){return this._state}function x(a,b){a._handlers=Object.create(null);a._slots=Object.create(null);a._bind=b._bind;a._staged={};a.options=b;a.root=b.root||a;a.store=b.store||a.root.store;b.root||(a._beforecreate=[],a._oncreate=[],a._aftercreate=[])}function sd(a,b){var c=this._handlers[a]||(this._handlers[a]=
[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}}function Nb(a){for(;a&&a.length;)a.shift()()}function td(){this.store._remove(this)}function ud(a,b){this._handlers={};this._dependents=[];this._computed=Object.create(null);this._sortedComputedProperties=[];this._state=r({},a);this._differs=b&&b.immutable?vf:pd}function kb(a,b){if(0>(b=(a=b?a.toExponential(b-1):a.toExponential()).indexOf("e")))return null;var c=a.slice(0,b);return[1<c.length?c[0]+c.slice(2):c,+a.slice(b+
1)]}function wf(a){return a=kb(Math.abs(a)),a?a[1]:NaN}function xf(a,b){return function(c,d){for(var e=c.length,f=[],g=0,h=a[0],l=0;0<e&&0<h;){l+h+1>d&&(h=Math.max(1,d-l));f.push(c.substring(e-=h,e+h));if((l+=h+1)>d)break;h=a[g=(g+1)%a.length]}return f.reverse().join(b)}}function yf(a){return function(b){return b.replace(/[0-9]/g,function(b){return a[+b]})}}function Ob(a){return new lb(a)}function lb(a){if(!(b=zf.exec(a)))throw Error("invalid format: "+a);var b;this.fill=b[1]||" ";this.align=b[2]||
">";this.sign=b[3]||"-";this.symbol=b[4]||"";this.zero=!!b[5];this.width=b[6]&&+b[6];this.comma=!!b[7];this.precision=b[8]&&+b[8].slice(1);this.trim=!!b[9];this.type=b[10]||""}function vd(a,b){b=kb(a,b);if(!b)return a+"";a=b[0];b=b[1];return 0>b?"0."+Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+1):a+Array(b-a.length+2).join("0")}function wd(a){return a}function Af(a){function b(a){function b(a){var b=r,d=t,g,l;if("c"===q)d=v(a)+d,a="";else{a=+a;var p=0>a;a=v(Math.abs(a),n);if(ha){var D=
a.length,ba=1,oa=-1;a:for(;ba<D;++ba)switch(a[ba]){case ".":oa=g=ba;break;case "0":0===oa&&(oa=ba);g=ba;break;default:if(0<oa){if(!+a[ba])break a;oa=0}}a=0<oa?a.slice(0,oa)+a.slice(g+1):a}p&&0===+a&&(p=!1);b=(p?"("===A?A:"-":"-"===A||"("===A?"":A)+b;d=("s"===q?xd[8+yd/3]:"")+d+(p&&"("===A?")":"");if(u)for(p=-1,g=a.length;++p<g;)if(l=a.charCodeAt(p),48>l||57<l){d=(46===l?e+a.slice(p+1):a.slice(p))+d;a=a.slice(0,p);break}}F&&!k&&(a=c(a,Infinity));l=b.length+a.length+d.length;p=l<Ua?Array(Ua-l+1).join(h):
"";F&&k&&(a=c(p+a,p.length?Ua-d.length:Infinity),p="");switch(m){case "<":a=b+a+d+p;break;case "=":a=b+p+a+d;break;case "^":a=p.slice(0,l=p.length>>1)+b+a+d+p.slice(l);break;default:a=p+b+a+d}return f(a)}a=Ob(a);var h=a.fill,m=a.align,A=a.sign,D=a.symbol,k=a.zero,Ua=a.width,F=a.comma,n=a.precision,ha=a.trim,q=a.type;"n"===q?(F=!0,q="g"):zd[q]||(null==n&&(n=12),ha=!0,q="g");if(k||"0"===h&&"="===m)k=!0,h="0",m="=";var r="$"===D?d[0]:"#"===D&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",t="$"===D?d[1]:/[%p]/.test(q)?
g:"",v=zd[q],u=/[defgprs%]/.test(q);n=null==n?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,n)):Math.max(0,Math.min(20,n));b.toString=function(){return a+""};return b}var c=a.grouping&&a.thousands?xf(a.grouping,a.thousands):wd,d=a.currency,e=a.decimal,f=a.numerals?yf(a.numerals):wd,g=a.percent||"%";return{format:b,formatPrefix:function(a,c){var d=b((a=Ob(a),a.type="f",a));a=3*Math.max(-8,Math.min(8,Math.floor(wf(c)/3)));var e=Math.pow(10,-a),g=xd[8+a/3];return function(a){return d(e*a)+g}}}}function Bf(a,
b){function c(b){a.fire("click")}var d,e=a._slotted.default;return{c(){d=k("button");d.addEventListener("click",c,void 0);q(d,"background-color",b.backgroundColor);q(d,"color",b.color);d.className="svelte-nm66xb"},m(a,b){a.insertBefore(d,b);e&&d.appendChild(e)},p(a,b){a.backgroundColor&&q(d,"background-color",b.backgroundColor);a.color&&q(d,"color",b.color)},d(a){a&&v(d);e&&Aa(d,e);d.removeEventListener("click",c,void 0)}}}function Fc(a){x(this,a);this._state=r({backgroundColor:"rgb(255, 130, 0)",
color:"white"},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=Bf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Cf(a,b){var c,d,e;return{c(){c=aa("svg");d=aa("path");e=aa("path");t(d,"d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:C,
d(a){a&&v(c)}}}function Ad(a){x(this,a);this._state=r({},a.data);this._intro=!0;this._fragment=Cf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Df(a,b){var c,d,e;return{c(){c=aa("svg");d=aa("path");e=aa("path");t(d,"d","M19 13H5v-2h14v2z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},p:C,d(a){a&&
v(c)}}}function Bd(a){x(this,a);this._state=r({},a.data);this._intro=!0;this._fragment=Df(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Ef(a,b){var c,d,e;return{c(){c=aa("svg");d=aa("path");e=aa("path");t(d,"d","M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z");t(e,"d","M0 0h24v24H0z");t(e,"fill","none");t(c,"xmlns","http://www.w3.org/2000/svg");t(c,"width","24");t(c,"height","24");t(c,"viewBox","0 0 24 24")},m(a,b){a.insertBefore(c,b);c.appendChild(d);c.appendChild(e)},
p:C,d(a){a&&v(c)}}}function Cd(a){x(this,a);this._state=r({},a.data);this._intro=!0;this._fragment=Ef(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Ff({name:a}){if("home"===a)return Cd;if("add"===a)return Ad;if("remove"===a)return Bd}function Gf(a,b){var c,d=b.Icon;if(d)var e=new d({root:a.root,store:a.store});return{c(){c=k("div");e&&e._fragment.c();q(c,"fill",b.color)},m(a,b){a.insertBefore(c,b);e&&e._mount(c,null)},p(b,g){d!==(d=g.Icon)&&(e&&e.destroy(),
d?(e=new d({root:a.root,store:a.store}),e._fragment.c(),e._mount(c,null)):e=null);b.color&&q(c,"fill",g.color)},d(a){a&&v(c);e&&e.destroy()}}}function ac(a){x(this,a);this._state=r({color:"black"},a.data);this._recompute({name:1},this._state);this._intro=!0;this._fragment=Gf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),E(this))}function Hf({clientWidth:a,extent:b}){return Math.min(a,Math.max(1E-6,b[0][0]*a))}function If({clientWidth:a,extent:b}){return Math.min(a,
b[0][1]*a)}function Jf({clientHeight:a,extent:b}){return Math.min(a,Math.max(1E-6,b[1][0]*a))}function Kf({clientHeight:a,extent:b}){return Math.min(a,b[1][1]*a)}function Lf(){setTimeout(()=>this.measure(),10)}function Mf(a,b){function c(b){a.measure()}function d(b){a.down(b)}var e;window.addEventListener("resize",c);var f=b.extent&&Dd(a,b);return{c(){e=k("div");f&&f.c();e.addEventListener("pointerdown",d,void 0);e.className="root svelte-1pppif8";q(e,"cursor",b.cursor);q(e,"position","absolute")},
m(b,c){b.insertBefore(e,c);f&&f.m(e,null);a.refs.root=e},p(b,c){c.extent?f?f.p(b,c):(f=Dd(a,c),f.c(),f.m(e,null)):f&&(f.d(1),f=null);b.cursor&&q(e,"cursor",c.cursor)},d(b){window.removeEventListener("resize",c);b&&v(e);f&&f.d();e.removeEventListener("pointerdown",d,void 0);a.refs.root===e&&(a.refs.root=null)}}}function Dd(a,b){var c,d,e,f,g=b.left&&b.right&&b.top&&b.bottom&&Ed(a,b),h=b.annotationValue&&Fd(a,b);return{c(){c=aa("svg");g&&g.c();d=n("\n  ");e=k("div");h&&h.c();t(c,"width",b.clientWidth);
t(c,"height",b.clientHeight);t(c,"class","svelte-1pppif8");e.className=f="reticle "+(b.round?"round":"")+" svelte-1pppif8";q(e,"border-color",b.color);q(e,"top",""+(b.top-1)+"px");q(e,"left",""+(b.left-1)+"px");q(e,"width",""+(b.right-b.left+2)+"px");q(e,"height",""+(b.bottom-b.top+2)+"px")},m(a,b){a.insertBefore(c,b);g&&g.m(c,null);a.insertBefore(d,b);a.insertBefore(e,b);h&&h.m(e,null)},p(b,d){d.left&&d.right&&d.top&&d.bottom?g?g.p(b,d):(g=Ed(a,d),g.c(),g.m(c,null)):g&&(g.d(1),g=null);b.clientWidth&&
t(c,"width",d.clientWidth);b.clientHeight&&t(c,"height",d.clientHeight);d.annotationValue?h?h.p(b,d):(h=Fd(a,d),h.c(),h.m(e,null)):h&&(h.d(1),h=null);b.round&&f!==(f="reticle "+(d.round?"round":"")+" svelte-1pppif8")&&(e.className=f);b.color&&q(e,"border-color",d.color);b.top&&q(e,"top",""+(d.top-1)+"px");b.left&&q(e,"left",""+(d.left-1)+"px");(b.right||b.left)&&q(e,"width",""+(d.right-d.left+2)+"px");(b.bottom||b.top)&&q(e,"height",""+(d.bottom-d.top+2)+"px")},d(a){a&&v(c);g&&g.d();a&&(v(d),v(e));
h&&h.d()}}}function Ed(a,b){var c,d,e;return{c(){c=aa("path");t(c,"class",d=(b.background?"":"transparent")+" svelte-1pppif8");t(c,"d",e="M0,0 L"+b.clientWidth+",0 L"+b.clientWidth+","+b.clientHeight+" L0,"+b.clientHeight+" z M"+b.left+","+b.top+" L"+b.left+","+b.bottom+" L"+b.right+","+b.bottom+" L"+b.right+","+b.top+" z")},m(a,b){a.insertBefore(c,b)},p(a,b){a.background&&d!==(d=(b.background?"":"transparent")+" svelte-1pppif8")&&t(c,"class",d);(a.clientWidth||a.clientHeight||a.left||a.top||a.bottom||
a.right)&&e!==(e="M0,0 L"+b.clientWidth+",0 L"+b.clientWidth+","+b.clientHeight+" L0,"+b.clientHeight+" z M"+b.left+","+b.top+" L"+b.left+","+b.bottom+" L"+b.right+","+b.bottom+" L"+b.right+","+b.top+" z")&&t(c,"d",e)},d(a){a&&v(c)}}}function Fd(a,b){var c,d,e,f;return{c(){c=k("div");d=k("div");e=k("div");f=n(b.annotationValue);e.className="annotation";d.className="annotationTab svelte-1pppif8";q(d,"background",b.color);c.className="annotationTabParent svelte-1pppif8";q(c,"top",""+(b.w*b.width-2)/
2+"px")},m(a,b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(e);e.appendChild(f)},p(a,b){a.annotationValue&&(f.data=""+b.annotationValue);a.color&&q(d,"background",b.color);(a.w||a.width)&&q(c,"top",""+(b.w*b.width-2)/2+"px")},d(a){a&&v(c)}}}function mb(a){x(this,a);this.refs={};this._state=r({dragging:!1,extent:[[0,0],[0,0]],background:!0,round:!1,color:"rgb(255, 130, 0)",enableDragging:!0,upListener:null,moveListener:null,cursor:"grab",clientWidth:98,clientHeight:98},a.data);this._recompute({clientWidth:1,
extent:1,clientHeight:1},this._state);this._intro=!0;this._fragment=Mf(this,this._state);this.root._oncreate.push(()=>{Lf.call(this);this.fire("update",{changed:J({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),E(this))}function Nf(){this.refs.element.addEventListener("ready",(a)=>{this.set({ready:!0})});this.refs.element.addEventListener("onscreen",(a)=>{this.set({onscreen:!0});this.fire("onscreen")});this.refs.element.addEventListener("offscreen",
(a)=>{this.set({onscreen:!1});this.fire("offscreen")})}function Of(a,b){var c,d=a._slotted.default;return{c(){c=k("d-figure");q(c,"display",b.display);q(c,"height",b.height)},m(b,f){b.insertBefore(c,f);d&&c.appendChild(d);a.refs.element=c},p(a,b){a.display&&q(c,"display",b.display);a.height&&q(c,"height",b.height)},d(b){b&&v(c);d&&Aa(c,d);a.refs.element===c&&(a.refs.element=null)}}}function Pb(a){x(this,a);this.refs={};this._state=r({display:"block",ready:!1,height:"",onscreen:!1,offscreen:!0},a.data);
this._intro=!0;this._slotted=a.slots||{};this._fragment=Of(this,this._state);this.root._oncreate.push(()=>{Nf.call(this);this.fire("update",{changed:J({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),E(this))}function Pf(a,b){var c;return{c(){c=k("div");c.innerHTML='<span class="svelte-19e83wz">Loading \u2026</span>';c.className="svelte-19e83wz"},m(a,b){a.insertBefore(c,b)},p:C,d(a){a&&v(c)}}}function Gd(a){x(this,a);this._state=r({},a.data);this._intro=
!0;this._fragment=Pf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Qf(a,b){var c,d,e=a._slotted.default;return{c(){c=k("div");d=k("div");d.className="container svelte-xqvv98";c.className="root svelte-xqvv98";q(c,"display",b.display);q(c,"padding-bottom",""+100/b.aspectRatio+"%")},m(a,b){a.insertBefore(c,b);c.appendChild(d);e&&d.appendChild(e)},p(a,b){a.display&&q(c,"display",b.display);a.aspectRatio&&q(c,"padding-bottom",""+100/b.aspectRatio+"%")},d(a){a&&
v(c);e&&Aa(d,e)}}}function Qb(a){x(this,a);this._state=r({display:"block",aspectRatio:1,clientWidth:0},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=Qf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Rf(a,b){var c,d,e,f=b.ready?Hd:Id,g=f(a,b),h={aspectRatio:b.aspectRatio},l=new Qb({root:a.root,store:a.store,slots:{default:Z()},data:h});h={};if(void 0!==b.ready){h.ready=b.ready;var p=!0}var m=new Pb({root:a.root,store:a.store,slots:{default:Z()},
data:h,_bind(b,c){var d={};!p&&b.ready&&(d.ready=c.ready);a._set(d);p=void 0}});a.root._beforecreate.push(()=>{m._bind({ready:1},m.get())});return{c(){c=k("div");g.c();d=document.createComment("");l._fragment.c();m._fragment.c();c.className=e=(b.background?"background":"")+" "+(b.border?"border":"")+" svelte-1q1tvil svelte-ref-root"},m(b,e){b.insertBefore(c,e);g.m(l._slotted.default,null);l._slotted.default.appendChild(d);l._mount(m._slotted.default,null);m._mount(c,null);a.refs.root=c},p(h,D){b=
D;f===(f=b.ready?Hd:Id)&&g?g.p(h,b):(g.d(1),g=f(a,b),g.c(),g.m(d.parentNode,d));D={};h.aspectRatio&&(D.aspectRatio=b.aspectRatio);l._set(D);D={};!p&&h.ready&&(D.ready=b.ready,p=void 0!==b.ready);m._set(D);p=void 0;(h.background||h.border)&&e!==(e=(b.background?"background":"")+" "+(b.border?"border":"")+" svelte-1q1tvil svelte-ref-root")&&(c.className=e)},d(b){b&&v(c);g.d();l.destroy();m.destroy();a.refs.root===c&&(a.refs.root=null)}}}function Id(a,b){var c=new Gd({root:a.root,store:a.store});return{c(){c._fragment.c()},
m(a,b){c._mount(a,b)},p:C,d(a){c.destroy(a)}}}function Hd(a,b){var c;return{c(){c=k("img");c.src=b.src;c.alt=b.alt;c.style.cssText=b.style;c.className="svelte-1q1tvil svelte-ref-image"},m(b,e){b.insertBefore(c,e);a.refs.image=c},p(a,b){a.src&&(c.src=b.src);a.alt&&(c.alt=b.alt);a.style&&(c.style.cssText=b.style)},d(b){b&&v(c);a.refs.image===c&&(a.refs.image=null)}}}function Jd(a){x(this,a);this.refs={};this._state=r({ready:!1,src:"",alt:"",style:"",display:"block",aspectRatio:1,border:!0,background:!1},
a.data);this._intro=!0;this._fragment=Rf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),E(this))}function Sf(a,b){var c,d,e,f=new Jd({root:a.root,store:a.store,data:{aspectRatio:1,src:"assets/images/renders/thumbnail-"+b.layerName+".jpg",border:!1,alt:"thumbnail for "+b.layerName}}),g={enableDragging:!0};if(void 0!==b.extent){g.extent=b.extent;var h=!0}var l=new mb({root:a.root,store:a.store,data:g,_bind(b,c){var d={};!h&&b.extent&&(d.extent=c.extent);a._set(d);h=void 0}});
a.root._beforecreate.push(()=>{l._bind({extent:1},l.get())});l.on("drag",function(b){a.fire("drag",b)});var p=new Qb({root:a.root,store:a.store,slots:{default:Z()}});return{c(){c=k("div");d=k("div");f._fragment.c();e=n("\n    ");l._fragment.c();p._fragment.c();q(d,"opacity","0.4");c.className="svelte-15ooxw3 svelte-ref-root"},m(b,g){b.insertBefore(c,g);p._slotted.default.appendChild(d);f._mount(d,null);p._slotted.default.appendChild(e);l._mount(p._slotted.default,null);p._mount(c,null);a.refs.root=
c},p(a,c){b=c;c={};a.layerName&&(c.src="assets/images/renders/thumbnail-"+b.layerName+".jpg");a.layerName&&(c.alt="thumbnail for "+b.layerName);f._set(c);c={};!h&&a.extent&&(c.extent=b.extent,h=void 0!==b.extent);l._set(c);h=void 0},d(b){b&&v(c);f.destroy();l.destroy();p.destroy();a.refs.root===c&&(a.refs.root=null)}}}function Kd(a){x(this,a);this.refs={};this._state=r({scaleCountFactor:200},a.data);this._intro=!0;this._fragment=Sf(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,
a.anchor),E(this))}function Rb(){}function nb(a){for(var b,c,d=1,e=arguments.length;d<e;d++)for(b in c=arguments[d],c)a[b]=c[b];return a}function Ld(a){this.destroy=Rb;this.fire("destroy");this.set=this.get=Rb;!1!==a&&this._fragment.u();this._fragment.d();this._fragment=this._state=null}function Md(a,b,c,d,e){for(var f in b)if(c[f]){var g=d[f],h=e[f],l=b[f];if(l)for(var p=0;p<l.length;p+=1){var m=l[p];m.__calling||(m.__calling=!0,m.call(a,g,h),m.__calling=!1)}}}function ob(a){for(;a&&a.length;)a.shift()()}
function Tf(a,b){return b?b:a}function Uf(){let a=(b)=>{this.set({loaded:!0});var {img:b}=this.get();b.removeEventListener("loaded",a)};this.observe("index",(a)=>{this.draw()},{init:!1});this.observe("img",(a)=>{this.draw()},{init:!1});this.observe("loaded",(a)=>{this.draw()},{init:!1});this.observe("url",(b)=>{let c=this.get("img");c&&c.removeEventListener("load",a);if(Sb.has(b))b=Sb.get(b),b.loaded?this.set({loaded:!0,img:b.img}):(this.set({loaded:!1,img:b.img}),b.img.addEventListener("load",a));
else{let c=new Image;this.set({loaded:!1,img:c});let e={img:c},f=(a)=>{e.loaded=!0;c.removeEventListener("load",f)};c.addEventListener("load",f);c.addEventListener("load",a);Sb.set(b,e);c.src=b}})}function Vf(a,b){var c;return{c:function(){c=document.createElement("canvas");this.h()},h:function(){c.width=b.width;c.height=b.realHeight},m:function(b,e){b.insertBefore(c,e);a.refs.canvas=c},p:function(a,b){a.width&&(c.width=b.width);a.realHeight&&(c.height=b.realHeight)},u:function(){c.parentNode.removeChild(c)},
d:function(){a.refs.canvas===c&&(a.refs.canvas=null)}}}function Nd(a){this._observers={pre:Object.create(null),post:Object.create(null)};this._handlers=Object.create(null);this._bind=a._bind;this.options=a;this.root=a.root||this;this.store=this.root.store||a.store;this.refs={};this._state=nb({url:"",index:0,width:100,loaded:null,columns:Infinity,height:null,img:null},a.data);this._recompute({width:1,height:1},this._state);var b=Uf.bind(this);a.root||(this._oncreate=[]);this._fragment=Vf(this,this._state);
this.root._oncreate.push(b);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),ob(this._oncreate))}function Od(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function Wf(a,b){var c=Od(a);return function(d,e){return b(c(d),e,a)}}function Xf(a){var b=Object.create(null),c=[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)});return c}function Pd(a){function b(a,b){function c(){if(n)return pb;if(q)return q=!1,Qd;var b,
c=g,d;if(34===a.charCodeAt(c)){for(;g++<e&&34!==a.charCodeAt(g)||34===a.charCodeAt(++g););(b=g)>=e?n=!0:10===(d=a.charCodeAt(g++))?q=!0:13===d&&(q=!0,10===a.charCodeAt(g)&&++g);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;g<e;){if(10===(d=a.charCodeAt(b=g++)))q=!0;else if(13===d)q=!0,10===a.charCodeAt(g)&&++g;else if(d!==f)continue;return a.slice(c,b)}return n=!0,a.slice(c,e)}var d=[],e=a.length,g=0,h=0,k,n=0>=e,q=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(k=c())!==pb;){for(var r=
[];k!==Qd&&k!==pb;)r.push(k),k=c();b&&null==(r=b(r,h++))||d.push(r)}return d}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),f=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?Wf(a,c):Od(a)});a.columns=e||[];return a},parseRows:b,format:function(b,c){null==c&&(c=Xf(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},
formatRows:function(a){return a.map(c).join("\n")}}}function Rd(a){if(a.ok)return a;throw Error(a.status+":"+a.statusText);}function Ia(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function qb(a){return fetch(a).then(Rd).then((a)=>a.text())}function Yf(a,b){b=null!=b?b:Date.now()+""+Math.random();let c="namespace:"+b+", url:"+a+", random:"+Date.now()+Math.random();rb.set(c,!1);if(sb.has(b)){let a=sb.get(b);rb.set(a,!0)}sb.set(b,c);return new Promise((b,
e)=>{if(Array.isArray(a)){var d=a.map((a)=>Sd(a));d=Promise.all(d)}else d=Sd(a);d.then((a)=>{rb.get(c)||b(a)}).catch((a)=>{rb.get(c)||e(a)})})}function Sd(a){if(tb.has(a))return tb.get(a);var b=Td;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');b=b.has(c)?c:"text";b=Td.get(b)(a);tb.set(a,b);return b}function Zf({clientWidth:a}){return a}function $f({model:a,layerName:b}){return a+"_"+b}function ag(){let {root:a,id:b,
grid:c}=this.get(),d=bg[b];null==d.class_filter&&(d.class_filter="None");null==d.filter&&(d.filter="None");Array.isArray(d.layout)||(d.layout=[d.layout]);Array.isArray(d.layer)||(d.layer=[d.layer]);Array.isArray(d.filter)||(d.filter=[d.filter]);this.set({gridSize:d.grid_size[c],layerName:d.layer[0]});Yf(`${a}/${b}/web/web--grid_size=${d.grid_size[c]}--layout=${d.layout[0]}--class_filter=${d.class_filter}--filter=${d.filter[0]}--layer=${d.layer[0]}--model=${d.model}--sample_images=${d.sample_images}--sample_type=${d.sample_type}.json`).then((a)=>
{this.set({icons:a});this.render()})}function cg({changed:a}){a.classHeatmap&&this.render()}function dg(a,b){var c,d;return{c(){c=k("div");d=k("canvas");d.width=b.gridSize;d.height=b.gridSize;q(d,"width","100%");d.className="svelte-sjakuy";q(c,"height",""+b.height+"px")},m(b,f){b.insertBefore(c,f);c.appendChild(d);a.refs.canvas=d},p(a,b){a.gridSize&&(d.width=b.gridSize,d.height=b.gridSize);a.height&&q(c,"height",""+b.height+"px")},d(b){b&&v(c);a.refs.canvas===d&&(a.refs.canvas=null)}}}function ub(a){x(this,
a);this.refs={};this._state=r({root:"https://storage.googleapis.com/activation-atlas/build",model:"inceptionv1",layerName:"mixed4d",grid:1,layout:0,gridSize:10,classHeatmap:-1,icons:[],clientWidth:45},a.data);this._recompute({clientWidth:1,model:1,layerName:1},this._state);this._intro=!0;this._handlers.update=[cg];this._fragment=dg(this,this._state);this.root._oncreate.push(()=>{ag.call(this);this.fire("update",{changed:J({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,
a.anchor),E(this))}function Ud(a,b,c){a=Object.create(a);a.layer=b[c];a.i=c;return a}function eg(a,b){for(var c,d=b.layers,e=[],f=0;f<d.length;f+=1)e[f]=Vd(a,Ud(b,d,f));return{c(){c=k("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className="stack"},m(a,b){a.insertBefore(c,b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},p(b,f){if(b.layerName||b.layers||b.classHeatmap){d=f.layers;for(var g=0;g<d.length;g+=1){let h=Ud(f,d,g);e[g]?e[g].p(b,h):(e[g]=Vd(a,h),e[g].c(),e[g].m(c,null))}for(;g<e.length;g+=1)e[g].d(1);
e.length=d.length}},d(a){a&&v(c);jb(e,a)}}}function Vd(a,b){function c(){a.set({layerName:e.__value})}var d,e,f,g,h,l,p,m=b.layer,A,D,ba,Ua=new ub({root:a.root,store:a.store,data:{grid:0,layerName:b.layer,classHeatmap:b.classHeatmap}});return{c(){d=k("label");e=k("input");g=n("\n    ");h=k("div");Ua._fragment.c();l=n("\n    ");p=k("span");A=n(m);D=n("\n  ");a._bindingGroups[0].push(e);e.addEventListener("change",c,void 0);t(e,"type","radio");e.__value=f=b.layer;e.value=e.__value;e.className="svelte-1lxnb2u";
h.className="thumb svelte-1lxnb2u";q(h,"position","relative");p.className="svelte-1lxnb2u";d.className=ba="layer "+(b.layerName==b.layer?"selected":"")+" svelte-1lxnb2u"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.layerName;d.appendChild(g);d.appendChild(h);Ua._mount(h,null);d.appendChild(l);d.appendChild(p);p.appendChild(A);d.appendChild(D)},p(a,b){a.layerName&&(e.checked=e.__value===b.layerName);a.layers&&f!==(f=b.layer)&&(e.__value=f);e.value=e.__value;var c={};a.layers&&
(c.layerName=b.layer);a.classHeatmap&&(c.classHeatmap=b.classHeatmap);Ua._set(c);a.layers&&m!==(m=b.layer)&&(A.data=""+m);(a.layerName||a.layers)&&ba!==(ba="layer "+(b.layerName==b.layer?"selected":"")+" svelte-1lxnb2u")&&(d.className=ba)},d(b){b&&v(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),1);e.removeEventListener("change",c,void 0);Ua.destroy()}}}function Wd(a){x(this,a);this._state=r({layerName:"mixed4c",layers:"mixed3a mixed3b mixed4a mixed4b mixed4c mixed4d mixed4e mixed5a mixed5b".split(" "),
classHeatmap:-1},a.data);this._bindingGroups=[[]];this._intro=!0;this._fragment=eg(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),E(this))}function fg({inceptionLabels:a}){let b=vb.map((b)=>({label:a.inception[b],i:b}));return[{label:"show all",i:-1}].concat(b)}function Xd(a,b,c){a=Object.create(a);a.l=b[c];return a}function gg(a,b){for(var c,d=b.labels,e=[],f=0;f<d.length;f+=1)e[f]=Yd(a,Xd(b,d,f));return{c(){c=k("div");for(var a=0;a<e.length;a+=1)e[a].c();c.className=
"chooser svelte-xexspk"},m(a,b){a.insertBefore(c,b);for(a=0;a<e.length;a+=1)e[a].m(c,null)},p(b,f){if(b.classHeatmap||b.labels){d=f.labels;for(var g=0;g<d.length;g+=1){let h=Xd(f,d,g);e[g]?e[g].p(b,h):(e[g]=Yd(a,h),e[g].c(),e[g].m(c,null))}for(;g<e.length;g+=1)e[g].d(1);e.length=d.length}},d(a){a&&v(c);jb(e,a)}}}function Yd(a,b){function c(){a.set({classHeatmap:e.__value})}var d,e,f,g,h,l=b.l.label,p,m,A,D;return{c(){d=k("label");e=k("input");g=n("\n      ");h=k("span");p=n(l);A=n("\n    ");a._bindingGroups[0].push(e);
e.addEventListener("change",c,void 0);t(e,"type","radio");e.__value=f=b.l.i;e.value=e.__value;e.className="svelte-xexspk";h.title=m=b.l.i;d.className=D=(b.classHeatmap===b.l.i?"selected":"")+" svelte-xexspk"},m(a,c){a.insertBefore(d,c);d.appendChild(e);e.checked=e.__value===b.classHeatmap;d.appendChild(g);d.appendChild(h);h.appendChild(p);d.appendChild(A)},p(a,b){a.classHeatmap&&(e.checked=e.__value===b.classHeatmap);a.labels&&f!==(f=b.l.i)&&(e.__value=f);e.value=e.__value;a.labels&&l!==(l=b.l.label)&&
(p.data=""+l);a.labels&&m!==(m=b.l.i)&&(h.title=m);(a.classHeatmap||a.labels)&&D!==(D=(b.classHeatmap===b.l.i?"selected":"")+" svelte-xexspk")&&(d.className=D)},d(b){b&&v(d);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(e),1);e.removeEventListener("change",c,void 0)}}}function Oc(a){x(this,a);this._state=r({classesToKeep:vb,inceptionLabels:Va,classHeatmap:235},a.data);this._recompute({inceptionLabels:1},this._state);this._bindingGroups=[[]];this._intro=!0;this._fragment=gg(this,this._state);
a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Zd(a){return new Function("d","return {"+a.map(function(a,c){return JSON.stringify(a)+": d["+c+"]"}).join(",")+"}")}function hg(a,b){var c=Zd(a);return function(d,e){return b(c(d),e,a)}}function ig(a){var b=Object.create(null),c=[];a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)});return c}function $d(a){function b(a,b){function c(){if(q)return bc;if(n)return n=!1,ae;var b,c=g,d;if(34===a.charCodeAt(c)){for(;g++<e&&
34!==a.charCodeAt(g)||34===a.charCodeAt(++g););(b=g)>=e?q=!0:10===(d=a.charCodeAt(g++))?n=!0:13===d&&(n=!0,10===a.charCodeAt(g)&&++g);return a.slice(c+1,b-1).replace(/""/g,'"')}for(;g<e;){if(10===(d=a.charCodeAt(b=g++)))n=!0;else if(13===d)n=!0,10===a.charCodeAt(g)&&++g;else if(d!==f)continue;return a.slice(c,b)}return q=!0,a.slice(c,e)}var d=[],e=a.length,g=0,h=0,k,q=0>=e,n=!1;10===a.charCodeAt(e-1)&&--e;for(13===a.charCodeAt(e-1)&&--e;(k=c())!==bc;){for(var r=[];k!==ae&&k!==bc;)r.push(k),k=c();
b&&null==(r=b(r,h++))||d.push(r)}return d}function c(b){return b.map(d).join(a)}function d(a){return null==a?"":e.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}var e=new RegExp('["'+a+"\n\r]"),f=a.charCodeAt(0);return{parse:function(a,c){var d,e;a=b(a,function(a,b){if(d)return d(a,b-1);e=a;d=c?hg(a,c):Zd(a)});a.columns=e||[];return a},parseRows:b,format:function(b,c){null==c&&(c=ig(b));return[c.map(d).join(a)].concat(b.map(function(b){return c.map(function(a){return d(b[a])}).join(a)})).join("\n")},
formatRows:function(a){return a.map(c).join("\n")}}}function be(a){if(a.ok)return a;throw Error(a.status+":"+a.statusText);}function wb(a){return new Promise((b,c)=>{let d=new Image;d.onload=(a)=>b(d);d.onerror=(a)=>c(a);d.src=a})}function xb(a){return fetch(a).then(be).then((a)=>a.text())}function ce(a,b){b=null!=b?b:Date.now()+""+Math.random();let c="namespace:"+b+", url:"+a+", random:"+Date.now()+Math.random();Ja.set(c,!1);if(Pc.has(b)){let a=Pc.get(b);Ja.set(a,!0)}Pc.set(b,c);return new Promise((b,
e)=>{if(Array.isArray(a)){var d=a.map((a)=>de(a));d=Promise.all(d)}else d=de(a);d.then((a)=>{Ja.get(c)||b(a)}).catch((a)=>{Ja.get(c)||e(a)})})}function de(a){if(Qc.has(a))return Qc.get(a);var b=ee;var c=a.split(".");c=c[c.length-1];b.has(c)||console.warn("Trying to load url: "+a+' with an unknown filetype. Assuming "text".');b=b.has(c)?c:"text";b=ee.get(b)(a);Qc.set(a,b);return b}function fe(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function jg(a){return function(b,c){return fe(a(b),c)}}function kg({changed:a}){if(a.layer||
a.classFilter||a.id||a.layout||a.filter){let {root:b,id:c,layer:d,classFilter:e,filter:f,layout:g}=this.get();this.set({loading:!0});let h=lg[c];this.set({config:h});let l=!1,p=!1;switch(h.layer[d]){case "mixed4a":p=l=!0;break;case "mixed4d":l=!0;p=!1;break;case "mixed5a":l=!0;p=!1;break;case "mixed5b":l=!0,p=!1}null!==e&&(null==h.class_filter&&(h.class_filter="None"),null==h.filter&&(h.filter="None"),Array.isArray(h.grid_size)||(h.grid_size=[h.grid_size]),Array.isArray(h.class_filter)||(h.class_filter=
[h.class_filter]),Array.isArray(h.layer)||(h.layer=[h.layer]),Array.isArray(h.layout)||(h.layout=[h.layout]),Array.isArray(h.filter)||(h.filter=[h.filter]),a=h.grid_size.map((a)=>`${b}/${c}/web/web--grid_size=${a}--layout=${h.layout[g]}--class_filter=${h.class_filter[e]}--filter=${h.filter[f]}--layer=${h.layer[d]}--model=${h.model}--sample_images=${h.sample_images}--sample_type=${h.sample_type}.json`),ce(a).then((a)=>{let m=Array(a.length);a.forEach((a,A)=>{let k=h.grid_size[A],D=h.tile_size;Array(k/
D).keys();let n=[...Array(k).keys()].map((a)=>Array(k));for(let m of a){void 0!==m.x&&(m.grid_x=m.x);void 0!==m.y&&(m.grid_y=m.y);void 0!==m.n&&(m.num_activations=m.n);void 0!==m.i&&(m.top_class_indices=m.i);void 0!==m.v&&(m.top_class_values=m.v);void 0!==m.f&&(m.full_class_values=m.f,m.full_class_indices=vb);a=l?k-m.grid_x-1:m.grid_x;let A=p?k-m.grid_y-1:m.grid_y;m.gx=a/k;m.gy=A/k;m.gw=1/k;let q=Math.floor(m.grid_x/D),ba=Math.floor(m.grid_y/D);m.localX=m.grid_x%D;m.localY=m.grid_y%D;m.url=`${b}/${c}/render/render--x=${q}--y=${ba}--tries=${h.tries}--alpha=${h.alpha?
"True":"False"}--tile_size=${h.tile_size}--whiten=${h.whiten}--steps=${h.steps}--icon_size=${h.icon_size}--grid_size=${k}--layout=${h.layout[g]}--class_filter=${h.class_filter[e]}--filter=${h.filter[f]}--layer=${h.layer[d]}--model=${h.model}--sample_images=${h.sample_images}--sample_type=${h.sample_type}.jpg`;n[a][A]=m}m[A]=n});this.set({layers:m,loading:!1})}))}}function ge(a){x(this,a);this._state=r({fingerprint:Math.random()+Date.now(),root:"https://storage.googleapis.com/activation-atlas/build",
id:"inceptionv1",labels:Va.inception,layer:0,classFilter:0,filter:0,layout:0,config:null,layers:null,loading:!1},a.data);this._intro=!0;this._handlers.update=[kg];this._fragment={c:C,m:C,p:C,d:C};this.root._oncreate.push(()=>{this.fire("update",{changed:J({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),E(this))}function Rc(){for(var a=0,b=arguments.length,c={},d;a<b;++a){if(!(d=arguments[a]+"")||d in c)throw Error("illegal type: "+d);c[d]=[]}return new yb(c)}
function yb(a){this._=a}function mg(a,b){return a.trim().split(/^|\s+/).map(function(a){var c="",e=a.indexOf(".");0<=e&&(c=a.slice(e+1),a=a.slice(0,e));if(a&&!b.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:c}})}function he(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=ng;a=a.slice(0,d).concat(a.slice(d+1));break}null!=c&&a.push({name:b,value:c});return a}function zb(a){var b=a+="",c=b.indexOf(":");0<=c&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1));return ie.hasOwnProperty(b)?
{space:ie[b],local:a}:a}function og(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===c&&"http://www.w3.org/1999/xhtml"===b.documentElement.namespaceURI?b.createElement(a):b.createElementNS(c,a)}}function pg(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function je(a){a=zb(a);return(a.local?pg:og)(a)}function qg(){}function Sc(a){return null==a?qg:function(){return this.querySelector(a)}}function rg(){return[]}
function ke(a){return null==a?rg:function(){return this.querySelectorAll(a)}}function le(a){return Array(a.length)}function Ab(a,b){this.ownerDocument=a.ownerDocument;this.namespaceURI=a.namespaceURI;this._next=null;this._parent=a;this.__data__=b}function sg(a){return function(){return a}}function tg(a,b,c,d,e,f){for(var g=0,h,l=b.length,p=f.length;g<p;++g)(h=b[g])?(h.__data__=f[g],d[g]=h):c[g]=new Ab(a,f[g]);for(;g<l;++g)if(h=b[g])e[g]=h}function ug(a,b,c,d,e,f,g){var h,l,p={},m=b.length,A=f.length,
k=Array(m),n;for(h=0;h<m;++h)if(l=b[h])k[h]=n="$"+g.call(l,l.__data__,h,b),n in p?e[h]=l:p[n]=l;for(h=0;h<A;++h)n="$"+g.call(a,f[h],h,f),(l=p[n])?(d[h]=l,l.__data__=f[h],p[n]=null):c[h]=new Ab(a,f[h]);for(h=0;h<m;++h)(l=b[h])&&p[k[h]]===l&&(e[h]=l)}function vg(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function wg(a){return function(){this.removeAttribute(a)}}function xg(a){return function(){this.removeAttributeNS(a.space,a.local)}}function yg(a,b){return function(){this.setAttribute(a,b)}}function zg(a,
b){return function(){this.setAttributeNS(a.space,a.local,b)}}function Ag(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}function Bg(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}function Cg(a){return function(){this.style.removeProperty(a)}}function Dg(a,b,c){return function(){this.style.setProperty(a,b,c)}}function Eg(a,b,c){return function(){var d=
b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}function Ka(a,b){return a.style.getPropertyValue(b)||(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView).getComputedStyle(a,null).getPropertyValue(b)}function Fg(a){return function(){delete this[a]}}function Gg(a,b){return function(){this[a]=b}}function Hg(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function Tc(a){return a.classList||new me(a)}
function me(a){this._node=a;this._names=(a.getAttribute("class")||"").trim().split(/^|\s+/)}function ne(a,b){a=Tc(a);for(var c=-1,d=b.length;++c<d;)a.add(b[c])}function oe(a,b){a=Tc(a);for(var c=-1,d=b.length;++c<d;)a.remove(b[c])}function Ig(a){return function(){ne(this,a)}}function Jg(a){return function(){oe(this,a)}}function Kg(a,b){return function(){(b.apply(this,arguments)?ne:oe)(this,a)}}function Lg(){this.textContent=""}function Mg(a){return function(){this.textContent=a}}function Ng(a){return function(){var b=
a.apply(this,arguments);this.textContent=null==b?"":b}}function Og(){this.innerHTML=""}function Pg(a){return function(){this.innerHTML=a}}function Qg(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function Rg(){this.nextSibling&&this.parentNode.appendChild(this)}function Sg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tg(){return null}function Ug(){var a=this.parentNode;a&&a.removeChild(this)}function Vg(){return this.parentNode.insertBefore(this.cloneNode(!1),
this.nextSibling)}function Wg(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function Xg(a,b,c){a=pe(a,b,c);return function(b){var c=b.relatedTarget;c&&(c===this||c.compareDocumentPosition(this)&8)||a.call(this,b)}}function pe(a,b,c){return function(d){var e=u;u=d;try{a.call(this,this.__data__,b,c)}finally{u=e}}}function Yg(a){return a.trim().split(/^|\s+/).map(function(a){var b="",d=a.indexOf(".");0<=d&&(b=a.slice(d+1),a=a.slice(0,d));return{type:a,name:b}})}function Zg(a){return function(){var b=
this.__on;if(b){for(var c=0,d=-1,e=b.length,f;c<e;++c)(f=b[c],a.type&&f.type!==a.type||f.name!==a.name)?b[++d]=f:this.removeEventListener(f.type,f.listener,f.capture);++d?b.length=d:delete this.__on}}}function $g(a,b,c){var d=qe.hasOwnProperty(a.type)?Xg:pe;return function(e,f,g){e=this.__on;var h;f=d(b,f,g);if(e){g=0;for(var l=e.length;g<l;++g)if((h=e[g]).type===a.type&&h.name===a.name){this.removeEventListener(h.type,h.listener,h.capture);this.addEventListener(h.type,h.listener=f,h.capture=c);h.value=
b;return}}this.addEventListener(a.type,f,c);h={type:a.type,name:a.name,value:b,listener:f,capture:c};e?e.push(h):this.__on=[h]}}function re(a,b,c){var d=a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView,e=d.CustomEvent;"function"===typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,!1,!1));a.dispatchEvent(e)}function ah(a,b){return function(){return re(this,a,b)}}function bh(a,b){return function(){return re(this,
a,b.apply(this,arguments))}}function N(a,b){this._groups=a;this._parents=b}function La(){return new N([[document.documentElement]],se)}function Da(a){return"string"===typeof a?new N([[document.querySelector(a)]],[document.documentElement]):new N([[a]],se)}function te(){for(var a=u,b;b=a.sourceEvent;)a=b;return a}function ue(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint)return c=c.createSVGPoint(),c.x=b.clientX,c.y=b.clientY,c=c.matrixTransform(a.getScreenCTM().inverse()),[c.x,c.y];c=a.getBoundingClientRect();
return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Bb(a){var b=te();b.changedTouches&&(b=b.changedTouches[0]);return ue(a,b)}function ve(a,b,c){3>arguments.length&&(c=b,b=te().changedTouches);for(var d=0,e=b?b.length:0,f;d<e;++d)if((f=b[d]).identifier===c)return ue(a,f);return null}function Uc(){u.preventDefault();u.stopImmediatePropagation()}function ch(a){var b=a.document.documentElement;a=Da(a).on("dragstart.drag",Uc,!0);if("onselectstart"in b)a.on("selectstart.drag",Uc,
!0);else b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none"}function dh(a,b){var c=a.document.documentElement,d=Da(a).on("dragstart.drag",null);b&&(d.on("click.drag",Uc,!0),setTimeout(function(){d.on("click.drag",null)},0));if("onselectstart"in c)d.on("selectstart.drag",null);else c.style.MozUserSelect=c.__noselect,delete c.__noselect}function Ma(a,b,c){a.prototype=b.prototype=c;c.constructor=a}function Wa(a,b){a=Object.create(a.prototype);for(var c in b)a[c]=b[c];return a}function ta(){}
function ua(a){var b;a=(a+"").trim().toLowerCase();return(b=eh.exec(a))?(b=parseInt(b[1],16),new y(b>>8&15|b>>4&240,b>>4&15|b&240,(b&15)<<4|b&15,1)):(b=fh.exec(a))?we(parseInt(b[1],16)):(b=gh.exec(a))?new y(b[1],b[2],b[3],1):(b=hh.exec(a))?new y(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=ih.exec(a))?xe(b[1],b[2],b[3],b[4]):(b=jh.exec(a))?xe(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=kh.exec(a))?ye(b[1],b[2]/100,b[3]/100,1):(b=lh.exec(a))?ye(b[1],b[2]/100,b[3]/100,b[4]):ze.hasOwnProperty(a)?
we(ze[a]):"transparent"===a?new y(NaN,NaN,NaN,0):null}function we(a){return new y(a>>16&255,a>>8&255,a&255,1)}function xe(a,b,c,d){0>=d&&(a=b=c=NaN);return new y(a,b,c,d)}function Vc(a){a instanceof ta||(a=ua(a));if(!a)return new y;a=a.rgb();return new y(a.r,a.g,a.b,a.opacity)}function Wc(a,b,c,d){return 1===arguments.length?Vc(a):new y(a,b,c,null==d?1:d)}function y(a,b,c,d){this.r=+a;this.g=+b;this.b=+c;this.opacity=+d}function Xc(a){a=Math.max(0,Math.min(255,Math.round(a)||0));return(16>a?"0":"")+
a.toString(16)}function ye(a,b,c,d){0>=d?a=b=c=NaN:0>=c||1<=c?a=b=NaN:0>=b&&(a=NaN);return new L(a,b,c,d)}function mh(a){if(a instanceof L)return new L(a.h,a.s,a.l,a.opacity);a instanceof ta||(a=ua(a));if(!a)return new L;if(a instanceof L)return a;a=a.rgb();var b=a.r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,h=f-e,l=(f+e)/2;h?(g=b===f?(c-d)/h+6*(c<d):c===f?(d-b)/h+2:(b-c)/h+4,h/=.5>l?f+e:2-f-e,g*=60):h=0<l&&1>l?0:g;return new L(g,h,l,a.opacity)}function L(a,b,c,d){this.h=+a;
this.s=+b;this.l=+c;this.opacity=+d}function Yc(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function Zc(a){if(a instanceof P)return new P(a.l,a.a,a.b,a.opacity);if(a instanceof pa){if(isNaN(a.h))return new P(a.l,0,0,a.opacity);var b=a.h*Ae;return new P(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}a instanceof y||(a=Vc(a));var c=$c(a.r),d=$c(a.g),e=$c(a.b);b=ad(.2225045*c+.7168786*d+.0606169*e);if(c===d&&d===e)var f=c=b;else f=ad((.4360747*c+.3850649*d+.1430804*e)/.96422),
c=ad((.0139322*c+.0971045*d+.7141733*e)/.82521);return new P(116*b-16,500*(f-b),200*(b-c),a.opacity)}function P(a,b,c,d){this.l=+a;this.a=+b;this.b=+c;this.opacity=+d}function ad(a){return a>nh?Math.pow(a,1/3):a/Be+Ce}function bd(a){return a>ia?a*a*a:Be*(a-Ce)}function cd(a){return 255*(.0031308>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function $c(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function oh(a){if(a instanceof pa)return new pa(a.h,a.c,a.l,a.opacity);a instanceof P||(a=
Zc(a));if(0===a.a&&0===a.b)return new pa(NaN,0,a.l,a.opacity);var b=Math.atan2(a.b,a.a)*De;return new pa(0>b?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}function pa(a,b,c,d){this.h=+a;this.c=+b;this.l=+c;this.opacity=+d}function Ea(a,b,c,d){this.h=+a;this.s=+b;this.l=+c;this.opacity=+d}function Ee(a){return function(){return a}}function ph(a,b){return function(c){return a+c*b}}function qh(a,b,c){return a=Math.pow(a,c),b=Math.pow(b,c)-a,c=1/c,function(d){return Math.pow(a+d*b,c)}}function rh(a){return 1===
(a=+a)?Fe:function(b,c){return c-b?qh(b,c,a):Ee(isNaN(b)?c:b)}}function Fe(a,b){var c=b-a;return c?ph(a,c):Ee(isNaN(a)?b:a)}function Q(a,b){return a=+a,b-=a,function(c){return a+b*c}}function sh(a){return function(){return a}}function th(a){return function(b){return a(b)+""}}function uh(a,b){var c=dd.lastIndex=ed.lastIndex=0,d,e,f,g=-1,h=[],l=[];a+="";for(b+="";(d=dd.exec(a))&&(e=ed.exec(b));)(f=e.index)>c&&(f=b.slice(c,f),h[g]?h[g]+=f:h[++g]=f),(d=d[0])===(e=e[0])?h[g]?h[g]+=e:h[++g]=e:(h[++g]=null,
l.push({i:g,x:Q(d,e)})),c=ed.lastIndex;c<b.length&&(f=b.slice(c),h[g]?h[g]+=f:h[++g]=f);return 2>h.length?l[0]?th(l[0].x):sh(b):(b=l.length,function(a){for(var c=0,d;c<b;++c)h[(d=l[c]).i]=d.x(a);return h.join("")})}function Ge(a,b,c,d,e,f){var g,h,l;if(g=Math.sqrt(a*a+b*b))a/=g,b/=g;if(l=a*c+b*d)c-=a*l,d-=b*l;if(h=Math.sqrt(c*c+d*d))c/=h,d/=h,l/=h;a*d<b*c&&(a=-a,b=-b,l=-l,g=-g);return{translateX:e,translateY:f,rotate:Math.atan2(b,a)*He,skewX:Math.atan(l)*He,scaleX:g,scaleY:h}}function Ie(a,b,c,d){function e(a){return a.length?
a.pop()+" ":""}function f(a,d,e,f,g,h){a!==e||d!==f?(g=g.push("translate(",null,b,null,c),h.push({i:g-4,x:Q(a,e)},{i:g-2,x:Q(d,f)})):(e||f)&&g.push("translate("+e+b+f+c)}function g(a,b,c,f){a!==b?(180<a-b?b+=360:180<b-a&&(a+=360),f.push({i:c.push(e(c)+"rotate(",null,d)-2,x:Q(a,b)})):b&&c.push(e(c)+"rotate("+b+d)}function h(a,b,c,f){a!==b?f.push({i:c.push(e(c)+"skewX(",null,d)-2,x:Q(a,b)}):b&&c.push(e(c)+"skewX("+b+d)}function l(a,b,c,d,f,g){a!==c||b!==d?(f=f.push(e(f)+"scale(",null,",",null,")"),
g.push({i:f-4,x:Q(a,c)},{i:f-2,x:Q(b,d)})):1===c&&1===d||f.push(e(f)+"scale("+c+","+d+")")}return function(b,c){var d=[],e=[];b=a(b);c=a(c);f(b.translateX,b.translateY,c.translateX,c.translateY,d,e);g(b.rotate,c.rotate,d,e);h(b.skewX,c.skewX,d,e);l(b.scaleX,b.scaleY,c.scaleX,c.scaleY,d,e);b=c=null;return function(a){for(var b=-1,c=e.length,f;++b<c;)d[(f=e[b]).i]=f.x(a);return d.join("")}}}function Je(a){return((a=Math.exp(a))+1/a)/2}function vh(a,b){var c=a[0],d=a[1],e=a[2];a=b[2];var f=b[0]-c,g=
b[1]-d,h=f*f+g*g;if(1E-12>h){var l=Math.log(a/e)/Xa;a=function(a){return[c+a*f,d+a*g,e*Math.exp(Xa*a*l)]}}else{var p=Math.sqrt(h);b=(a*a-e*e+4*h)/(4*e*p);a=(a*a-e*e-4*h)/(4*a*p);var m=Math.log(Math.sqrt(b*b+1)-b);l=(Math.log(Math.sqrt(a*a+1)-a)-m)/Xa;a=function(a){a*=l;var b=Je(m),h=Xa*a+m;var k=((h=Math.exp(2*h))-1)/(h+1);var A=m;h=((A=Math.exp(A))-1/A)/2;k=e/(2*p)*(b*k-h);return[c+k*f,d+k*g,e*b/Je(Xa*a+m)]}}a.duration=1E3*l;return a}function Cb(){return Fa||(Ke(wh),Fa=Ya.now()+Na)}function wh(){Fa=
0}function Db(){this._call=this._time=this._next=null}function Le(a,b,c){var d=new Db;d.restart(a,b,c);return d}function Me(){Fa=(Eb=Ya.now())+Na;va=wa=0;try{Cb();++va;for(var a=Fb,b;a;)0<=(b=Fa-a._time)&&a._call.call(null,b),a=a._next;--va}finally{va=0;a=Fb;for(var c=Infinity;a;)if(a._call){c>a._time&&(c=a._time);var d=a;a=a._next}else b=a._next,a._next=null,a=d?d._next=b:Fb=b;Za=d;fd(c);Fa=0}}function xh(){var a=Ya.now(),b=a-Eb;1E3<b&&(Na-=b,Eb=a)}function fd(a){va||(wa&&(wa=clearTimeout(wa)),24<
a-Fa?(Infinity>a&&(wa=setTimeout(Me,a-Ya.now()-Na)),$a&&($a=clearInterval($a))):($a||(Eb=Ya.now(),$a=setInterval(xh,1E3)),va=1,Ke(Me)))}function Ne(a,b,c){var d=new Db;b=null==b?0:+b;d.restart(function(c){d.stop();a(c+b)},b,c);return d}function Oa(a,b,c,d,e,f){var g=a.__transition;if(!g)a.__transition={};else if(c in g)return;yh(a,c,{name:b,index:d,group:e,on:zh,tween:Ah,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:0})}function gd(a,b){a=H(a,b);if(0<a.state)throw Error("too late; already scheduled");
return a}function ja(a,b){a=H(a,b);if(2<a.state)throw Error("too late; already started");return a}function H(a,b){a=a.__transition;if(!a||!(a=a[b]))throw Error("transition not found");return a}function yh(a,b,c){function d(l){var p,m;if(1!==c.state)return f();for(n in g){var k=g[n];if(k.name===c.name){if(3===k.state)return Ne(d);4===k.state?(k.state=6,k.timer.stop(),k.on.call("interrupt",a,a.__data__,k.index,k.group),delete g[n]):+n<b&&(k.state=6,k.timer.stop(),delete g[n])}}Ne(function(){3===c.state&&
(c.state=4,c.timer.restart(e,c.delay,c.time),e(l))});c.state=2;c.on.call("start",a,a.__data__,c.index,c.group);if(2===c.state){c.state=3;h=Array(m=c.tween.length);var n=0;for(p=-1;n<m;++n)if(k=c.tween[n].value.call(a,a.__data__,c.index,c.group))h[++p]=k;h.length=p+1}}function e(b){b=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart(f),c.state=5,1);for(var d=-1,e=h.length;++d<e;)h[d].call(null,b);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),f())}function f(){c.state=6;c.timer.stop();
delete g[b];for(var d in g)return;delete a.__transition}var g=a.__transition,h;g[b]=c;c.timer=Le(function(a){c.state=1;c.timer.restart(d,c.delay,c.time);c.delay<=a&&d(a-c.delay)},0,c.time)}function Gb(a,b){var c=a.__transition,d,e=!0,f;if(c){b=null==b?null:b+"";for(f in c)if((d=c[f]).name!==b)e=!1;else{var g=2<d.state&&5>d.state;d.state=6;d.timer.stop();g&&d.on.call("interrupt",a,a.__data__,d.index,d.group);delete c[f]}e&&delete a.__transition}}function Bh(a,b){var c,d;return function(){var e=ja(this,
a),f=e.tween;if(f!==c){d=c=f;f=0;for(var g=d.length;f<g;++f)if(d[f].name===b){d=d.slice();d.splice(f,1);break}}e.tween=d}}function Ch(a,b,c){var d,e;if("function"!==typeof c)throw Error();return function(){var f=ja(this,a),g=f.tween;if(g!==d){e=(d=g).slice();g={name:b,value:c};for(var h=0,l=e.length;h<l;++h)if(e[h].name===b){e[h]=g;break}h===l&&e.push(g)}f.tween=e}}function hd(a,b,c){var d=a._id;a.each(function(){var a=ja(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)});return function(a){return H(a,
d).value[b]}}function Oe(a,b){var c;return("number"===typeof b?Q:b instanceof ua?Pe:(c=ua(b))?(b=c,Pe):uh)(a,b)}function Dh(a){return function(){this.removeAttribute(a)}}function Eh(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Fh(a,b,c){var d,e;return function(){var f=this.getAttribute(a);return f===c?null:f===d?e:e=b(d=f,c)}}function Gh(a,b,c){var d,e;return function(){var f=this.getAttributeNS(a.space,a.local);return f===c?null:f===d?e:e=b(d=f,c)}}function Hh(a,b,c){var d,
e,f;return function(){var g=c(this);if(null==g)return void this.removeAttribute(a);var h=this.getAttribute(a);return h===g?null:h===d&&g===e?f:f=b(d=h,e=g)}}function Ih(a,b,c){var d,e,f;return function(){var g=c(this);if(null==g)return void this.removeAttributeNS(a.space,a.local);var h=this.getAttributeNS(a.space,a.local);return h===g?null:h===d&&g===e?f:f=b(d=h,e=g)}}function Jh(a,b){function c(){var c=this,e=b.apply(c,arguments);return e&&function(b){c.setAttributeNS(a.space,a.local,e(b))}}c._value=
b;return c}function Kh(a,b){function c(){var c=this,e=b.apply(c,arguments);return e&&function(b){c.setAttribute(a,e(b))}}c._value=b;return c}function Lh(a,b){return function(){gd(this,a).delay=+b.apply(this,arguments)}}function Mh(a,b){return b=+b,function(){gd(this,a).delay=b}}function Nh(a,b){return function(){ja(this,a).duration=+b.apply(this,arguments)}}function Oh(a,b){return b=+b,function(){ja(this,a).duration=b}}function Ph(a,b){if("function"!==typeof b)throw Error();return function(){ja(this,
a).ease=b}}function Qh(a){return(a+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");0<=b&&(a=a.slice(0,b));return!a||"start"===a})}function Rh(a,b,c){var d,e,f=Qh(b)?gd:ja;return function(){var g=f(this,a),h=g.on;if(h!==d)(e=(d=h).copy()).on(b,c);g.on=e}}function Sh(a){return function(){var b=this.parentNode,c;for(c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}}function Th(a,b){var c,d,e;return function(){var f=Ka(this,a),g=(this.style.removeProperty(a),Ka(this,a));
return f===g?null:f===c&&g===d?e:e=b(c=f,d=g)}}function Uh(a){return function(){this.style.removeProperty(a)}}function Vh(a,b,c){var d,e;return function(){var f=Ka(this,a);return f===c?null:f===d?e:e=b(d=f,c)}}function Wh(a,b,c){var d,e,f;return function(){var g=Ka(this,a),h=c(this);null==h&&(h=(this.style.removeProperty(a),Ka(this,a)));return g===h?null:g===d&&h===e?f:f=b(d=g,e=h)}}function Xh(a,b,c){function d(){var d=this,f=b.apply(d,arguments);return f&&function(b){d.style.setProperty(a,f(b),
c)}}d._value=b;return d}function Yh(a){return function(){this.textContent=a}}function Zh(a){return function(){var b=a(this);this.textContent=null==b?"":b}}function qa(a,b,c,d){this._groups=a;this._parents=b;this._name=c;this._id=d}function Pa(a){return function(){return a}}function $h(a,b,c){this.target=a;this.type=b;this.transform=c}function ra(a,b,c){this.k=a;this.x=b;this.y=c}function Qe(a){return a.__zoom||Hb}function xa(){u.preventDefault();u.stopImmediatePropagation()}function ai(){return!u.button}
function bi(){var a=this;if(a instanceof SVGElement){a=a.ownerSVGElement||a;var b=a.width.baseVal.value;a=a.height.baseVal.value}else b=a.clientWidth,a=a.clientHeight;return[[0,0],[b,a]]}function Re(){return this.__zoom||Hb}function ci(){return-u.deltaY*(u.deltaMode?120:1)/500}function di(){return"ontouchstart"in this}function ei(a,b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],f=a.invertY(b[0][1])-c[0][1];b=a.invertY(b[1][1])-c[1][1];return a.translate(e>d?(d+e)/2:Math.min(0,
d)||Math.max(0,e),b>f?(f+b)/2:Math.min(0,f)||Math.max(0,b))}function fi(){function a(a){a.property("__zoom",Re).on("wheel.zoom",h).on("mousedown.zoom",l).on("dblclick.zoom",p).filter(ha).on("touchstart.zoom",m).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",n).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(a,b){b=Math.max(B[0],Math.min(B[1],b));return b===a.k?a:new ra(b,a.x,a.y)}function c(a,b,c){var d=b[0]-c[0]*a.k;b=b[1]-c[1]*a.k;return d===
a.x&&b===a.y?a:new ra(a.k,d,b)}function d(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function e(a,b,c){a.on("start.zoom",function(){f(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){f(this,arguments).end()}).tween("zoom",function(){var a=arguments,e=f(this,a),g=r.apply(this,a),h=c||d(g),l=Math.max(g[1][0]-g[0][0],g[1][1]-g[0][1]);g=this.__zoom;var p="function"===typeof b?b.apply(this,a):b,m=w(g.invert(h).concat(l/g.k),p.invert(h).concat(l/p.k));return function(a){if(1===
a)a=p;else{a=m(a);var b=l/a[2];a=new ra(b,h[0]-a[0]*b,h[1]-a[1]*b)}e.zoom(null,a)}})}function f(a,b){for(var c=0,d=O.length,e;c<d;++c)if((e=O[c]).that===a)return e;return new g(a,b)}function g(a,b){this.that=a;this.args=b;this.index=-1;this.active=0;this.extent=r.apply(a,b)}function h(){if(q.apply(this,arguments)){var a=f(this,arguments),d=this.__zoom,e=Math.max(B[0],Math.min(B[1],d.k*Math.pow(2,v.apply(this,arguments)))),g=Bb(this);if(a.wheel){if(a.mouse[0][0]!==g[0]||a.mouse[0][1]!==g[1])a.mouse[1]=
d.invert(a.mouse[0]=g);clearTimeout(a.wheel)}else{if(d.k===e)return;a.mouse=[g,d.invert(g)];Gb(this);a.start()}xa();a.wheel=setTimeout(function(){a.wheel=null;a.end()},150);a.zoom("mouse",t(c(b(d,e),a.mouse[0],a.mouse[1]),a.extent,z))}}function l(){if(!y&&q.apply(this,arguments)){var a=f(this,arguments),b=Da(u.view).on("mousemove.zoom",function(){xa();if(!a.moved){var b=u.clientX-e,d=u.clientY-g;a.moved=b*b+d*d>M}a.zoom("mouse",t(c(a.that.__zoom,a.mouse[0]=Bb(a.that),a.mouse[1]),a.extent,z))},!0).on("mouseup.zoom",
function(){b.on("mousemove.zoom mouseup.zoom",null);dh(u.view,a.moved);xa();a.end()},!0),d=Bb(this),e=u.clientX,g=u.clientY;ch(u.view);u.stopImmediatePropagation();a.mouse=[d,this.__zoom.invert(d)];Gb(this);a.start()}}function p(){if(q.apply(this,arguments)){var d=this.__zoom,f=Bb(this),g=d.invert(f);d=t(c(b(d,d.k*(u.shiftKey?.5:2)),f,g),r.apply(this,arguments),z);xa();0<x?Da(this).transition().duration(x).call(e,d,f):Da(this).call(a.transform,d)}}function m(){if(q.apply(this,arguments)){var a=f(this,
arguments),b=u.changedTouches,c=b.length,d;u.stopImmediatePropagation();for(d=0;d<c;++d){var e=b[d];var g=ve(this,b,e.identifier);g=[g,this.__zoom.invert(g),e.identifier];if(a.touch0)a.touch1||(a.touch1=g);else{a.touch0=g;var h=!0}}if(G&&(G=clearTimeout(G),!a.touch1)){a.end();(g=Da(this).on("dblclick.zoom"))&&g.apply(this,arguments);return}h&&(G=setTimeout(function(){G=null},500),Gb(this),a.start())}}function k(){var a=f(this,arguments),d=u.changedTouches,e=d.length,g;xa();G&&(G=clearTimeout(G));
for(g=0;g<e;++g){var h=d[g];var l=ve(this,d,h.identifier);a.touch0&&a.touch0[2]===h.identifier?a.touch0[0]=l:a.touch1&&a.touch1[2]===h.identifier&&(a.touch1[0]=l)}h=a.that.__zoom;if(a.touch1){l=a.touch0[0];d=a.touch0[1];g=a.touch1[0];e=a.touch1[1];var p=(p=g[0]-l[0])*p+(p=g[1]-l[1])*p;var m=(m=e[0]-d[0])*m+(m=e[1]-d[1])*m;h=b(h,Math.sqrt(p/m));l=[(l[0]+g[0])/2,(l[1]+g[1])/2];p=[(d[0]+e[0])/2,(d[1]+e[1])/2]}else if(a.touch0)l=a.touch0[0],p=a.touch0[1];else return;a.zoom("touch",t(c(h,l,p),a.extent,
z))}function n(){var a=f(this,arguments),b=u.changedTouches,c=b.length,d;u.stopImmediatePropagation();y&&clearTimeout(y);y=setTimeout(function(){y=null},500);for(d=0;d<c;++d){var e=b[d];a.touch0&&a.touch0[2]===e.identifier?delete a.touch0:a.touch1&&a.touch1[2]===e.identifier&&delete a.touch1}a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1);a.touch0?a.touch0[1]=this.__zoom.invert(a.touch0[0]):a.end()}var q=ai,r=bi,t=ei,v=ci,ha=di,B=[0,Infinity],z=[[-Infinity,-Infinity],[Infinity,Infinity]],
x=250,w=vh,O=[],Zb=Rc("start","zoom","end"),G,y,M=0;a.transform=function(a,b){var c=a.selection?a.selection():a;c.property("__zoom",Re);a!==c?e(a,b):c.interrupt().each(function(){f(this,arguments).start().zoom(null,"function"===typeof b?b.apply(this,arguments):b).end()})};a.scaleBy=function(b,c){a.scaleTo(b,function(){var a=this.__zoom.k,b="function"===typeof c?c.apply(this,arguments):c;return a*b})};a.scaleTo=function(e,f){a.transform(e,function(){var a=r.apply(this,arguments),e=this.__zoom,g=d(a),
h=e.invert(g),l="function"===typeof f?f.apply(this,arguments):f;return t(c(b(e,l),g,h),a,z)})};a.translateBy=function(b,c,d){a.transform(b,function(){return t(this.__zoom.translate("function"===typeof c?c.apply(this,arguments):c,"function"===typeof d?d.apply(this,arguments):d),r.apply(this,arguments),z)})};a.translateTo=function(b,c,e){a.transform(b,function(){var a=r.apply(this,arguments),b=this.__zoom,f=d(a);return t(Hb.translate(f[0],f[1]).scale(b.k).translate("function"===typeof c?-c.apply(this,
arguments):-c,"function"===typeof e?-e.apply(this,arguments):-e),a,z)})};g.prototype={start:function(){1===++this.active&&(this.index=O.push(this)-1,this.emit("start"));return this},zoom:function(a,b){this.mouse&&"mouse"!==a&&(this.mouse[1]=b.invert(this.mouse[0]));this.touch0&&"touch"!==a&&(this.touch0[1]=b.invert(this.touch0[0]));this.touch1&&"touch"!==a&&(this.touch1[1]=b.invert(this.touch1[0]));this.that.__zoom=b;this.emit("zoom");return this},end:function(){0===--this.active&&(O.splice(this.index,
1),this.index=-1,this.emit("end"));return this},emit:function(b){var c=new $h(a,b,this.that.__zoom),d=Zb.apply;b=[b,this.that,this.args];var e=u;c.sourceEvent=u;u=c;try{d.apply(Zb,b)}finally{u=e}}};a.wheelDelta=function(b){return arguments.length?(v="function"===typeof b?b:Pa(+b),a):v};a.filter=function(b){return arguments.length?(q="function"===typeof b?b:Pa(!!b),a):q};a.touchable=function(b){return arguments.length?(ha="function"===typeof b?b:Pa(!!b),a):ha};a.extent=function(b){return arguments.length?
(r="function"===typeof b?b:Pa([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),a):r};a.scaleExtent=function(b){return arguments.length?(B[0]=+b[0],B[1]=+b[1],a):[B[0],B[1]]};a.translateExtent=function(b){return arguments.length?(z[0][0]=+b[0][0],z[1][0]=+b[1][0],z[0][1]=+b[0][1],z[1][1]=+b[1][1],a):[[z[0][0],z[0][1]],[z[1][0],z[1][1]]]};a.constrain=function(b){return arguments.length?(t=b,a):t};a.duration=function(b){return arguments.length?(x=+b,a):x};a.interpolate=function(b){return arguments.length?
(w=b,a):w};a.on=function(){var b=Zb.on.apply(Zb,arguments);return b===Zb?a:b};a.clickDistance=function(b){return arguments.length?(M=(b=+b)*b,a):Math.sqrt(M)};return a}function gi(a){return function(){return a}}function id(a,b){if(a===b||a!==a)return gi(a);var c=typeof a;if(c!==typeof b||Array.isArray(a)!==Array.isArray(b))throw Error("Cannot interpolate values of different type");if(Array.isArray(a)){var d=b.map(function(b,c){return id(a[c],b)});return function(a){return d.map(function(b){return b(a)})}}if("object"===
c){if(!a||!b)throw Error("Object cannot be null");if("[object Date]"===Object.prototype.toString.call(a)&&"[object Date]"===Object.prototype.toString.call(b)){a=a.getTime();b=b.getTime();var e=b-a;return function(b){return new Date(a+b*e)}}var f=Object.keys(b),g={},h={};f.forEach(function(c){g[c]=id(a[c],b[c])});return function(a){f.forEach(function(b){h[b]=g[b](a)});return h}}if("number"===c){var l=b-a;return function(b){return a+b*l}}throw Error("Cannot interpolate "+c+" values");}function hi(a){return a}
function ii({clientWidth:a,clientHeight:b}){return Math.min(a,b)}function ji({msx:a,msy:b}){return void 0!=a&&void 0!=b}function ki({transform:a,msx:b,msy:c}){return a&&void 0!=b&&void 0!=c?[a.invertX(b),a.invertY(c)]:null}function li({scale:a,translateX:b,translateY:c,minSize:d,clientWidth:e,clientHeight:f}){b=-b/a;c=-c/a;return[[b/d,(b+e/a)/d],[c/d,(c+f/a)/d]]}function mi({extent:a}){return(a[0][0]+a[0][1])/2}function ni({extent:a}){return(a[1][0]+a[1][1])/2}function oi(){let {z:a,scaleExtent:b,
minSize:c,homeScale:d,homeX:e,homeY:f,disableBehaviors:g}=this.get(),h=this;a.wheelDelta(()=>{let a=-u.deltaY*(u.deltaMode?120:1)/500;u.ctrlKey&&(a*=10);return a});a.scaleExtent(b);let l=Da(this.refs.root);this.set({selection:l,el:this.refs.root});g||a(l);a.filter(this.zoomEventFilter.bind(this));a.on("zoom",()=>{this.onzoom(h)});a.translateTo(l,e*c,f*c);a.scaleTo(l,d)}function Se({changed:a,current:b,previous:c}){void 0!=c&&(a.clientWidth||a.clientHeight)&&b.el&&this.update();let {}=this.get()}function pi(a,
b){function c(b){a.mouseMove(b)}function d(b){a.set({msx:null,msy:null})}function e(b){a.set({msx:null,msy:null})}var f,g=a._slotted.default;return{c(){f=k("div");f.addEventListener("mousemove",c,void 0);f.addEventListener("mousedown",d,void 0);f.addEventListener("mouseout",e,void 0);f.className="d3zoom svelte-kaete3 svelte-ref-root"},m(b,c){b.insertBefore(f,c);g&&f.appendChild(g);a.refs.root=f},p:C,d(b){b&&v(f);g&&Aa(f,g);f.removeEventListener("mousemove",c,void 0);f.removeEventListener("mousedown",
d,void 0);f.removeEventListener("mouseout",e,void 0);a.refs.root===f&&(a.refs.root=null)}}}function Qa(a){x(this,a);this.refs={};this._state=r({z:fi(),el:null,selection:null,transform:null,scaleExtent:[1,48],homeScale:1,homeX:.5,homeY:.5,scale:null,translateX:null,translateY:null,k:1,x:0,y:0,msx:null,msy:null,disableBehaviors:!1,scrollWheel:!1},a.data);this._recompute({clientWidth:1,clientHeight:1,msx:1,msy:1,transform:1,minSize:1,scale:1,translateX:1,translateY:1,extent:1},this._state);this._intro=
!0;this._handlers.state=[Se];this._slotted=a.slots||{};Se.call(this,{changed:J({},this._state),current:this._state});this._fragment=pi(this,this._state);this.root._oncreate.push(()=>{oi.call(this);this.fire("update",{changed:J({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),E(this))}function qi({layers:a,layer:b}){if(null==a)return 0;let c=0;a[b].forEach((a)=>{a.forEach((a)=>{a&&500<a.num_activations&&(a=a.full_class_values[0],a>c&&(c=a))})});return c}
function ri({viewWidth:a,screenResolution:b}){return a*b}function si({viewHeight:a,screenResolution:b}){return a*b}function ti({scale:a,gridSize:b,config:c,classHeatmap:d,w:e,h:f,autoGridSizeMultiplier:g}){a=-1<b?+b:Math.floor(Math.sqrt(Math.max(e,f)*a/80/g/20));c&&(a=Math.min(c.grid_size.length-1,a));-1<d&&(a=Math.min(2,a));return a}function ui({currentZoomIndex:a,layers:b}){return b?b[a]:[[]]}function vi({labelsBufferContext:a,labels:b,fontSize:c,textColor:d,textShadowColor:e}){a&&b&&(a.globalAlpha=
1,a.font=c+"px Helvetica",b.forEach((b,c)=>{a.lineWidth=3;a.lineJoin="round";a.strokeStyle=e;a.strokeText(b,c%10*150+10,20*Math.floor(c/10+1),80,15);a.fillStyle=d;a.fillStyle=d;a.fillText(b,c%10*150+10,20*Math.floor(c/10+1),80,15)}))}function wi({hoverIconData:a,mouseGlobalPosition:b}){return b&&a&&a.gcx}function xi({currentLayerData:a,mouseGlobalPosition:b,w:c,h:d}){if(a){let e=a.length;if(b){let f=Math.floor(b[0]/Math.min(c,d)*e);b=Math.floor(b[1]/Math.min(c,d)*e);return a[b]&&a[b][f]?a[b][f]:{}}}return{}}
function yi({hoverIconData:a,scale:b,w:c,h:d,translateX:e}){return a.gy*b*Math.min(c,d)+e}function zi({hoverIconData:a,scale:b,w:c,h:d,translateY:e}){return a.gx*b*Math.min(c,d)+e}function Ai({hoverIconData:a,scale:b,w:c,h:d}){return a.gw*b*Math.min(c,d)}function Bi({mouseGlobalPosition:a,hoverIconData:b,enableHover:c}){return c&&a&&b&&b.gw}function Ci(){let {tooltip:a}=this.store.get();this.refs.d3Zoom.on("zoom",()=>{a.hide()});let b=document.createElement("canvas");b.width=1500;b.height=2040;let c=
b.getContext("2d");this.set({labelsBufferCanvas:b,labelsBufferContext:c});setTimeout(()=>{this.measure();this.home()},10)}function Di({changed:a,current:b}){if(!b.context||a.viewWidth||a.viewHeight){var c=this.refs.labelsCanvas.getContext("2d");c.imageSmoothingEnabled=!1;this.set({context:this.refs.canvas.getContext("2d"),labelsContext:c})}(a.loading||a.autoGridSizeMultiplier||a.labels||a.density||a.maxAttributionValue||a.classHeatmap||a.classHeatmapMultiplier||a.classHeatmapPositive||a.showLabels||
a.viewWidth||a.viewHeight||a.scale||a.translateX||a.translateY||a.iconCrop||a.gridSize||a.layers)&&this.render();if(a.hoverIconData){var {tooltip:c}=this.store.get();let {showHoverIcon:a}=this.get();a?c.show(b.hoverIconData):c.hide()}if(a.showHoverIcon&&0==b.showHoverIcon){var {tooltip:a}=this.store.get();a.hide()}}function Ei(a,b){function c(b){a.measure()}var d,e,f,g,h,l,p,m,q,r,t,u;window.addEventListener("resize",c);var F={};if(void 0!==b.ready){F.ready=b.ready;var $b=!0}var ha=new Pb({root:a.root,
store:a.store,data:F,_bind(b,c){var d={};!$b&&b.ready&&(d.ready=c.ready);a._set(d);$b=void 0}});a.root._beforecreate.push(()=>{ha._bind({ready:1},ha.get())});var B=b.ready&&Te(a,b),z=b.showHoverIcon&&Ue(a,b);F={clientWidth:b.viewWidth,clientHeight:b.viewHeight,homeX:b.homeX,homeY:b.homeY,homeScale:b.homeScale};if(void 0!==b.scale){F.scale=b.scale;var x=!0}if(void 0!==b.translateX){F.translateX=b.translateX;var w=!0}if(void 0!==b.translateY){F.translateY=b.translateY;var O=!0}if(void 0!==b.mouseOver){F.mouseOver=
b.mouseOver;var y=!0}if(void 0!==b.mouseGlobalPosition){F.mouseGlobalPosition=b.mouseGlobalPosition;var G=!0}if(void 0!==b.extent){F.extent=b.extent;var C=!0}if(void 0!==b.scrollWheel){F.scrollWheel=b.scrollWheel;var M=!0}if(void 0!==b.disableBehaviors){F.disableBehaviors=b.disableBehaviors;var Ba=!0}if(void 0!==b.gcx){F.gcx=b.gcx;var E=!0}if(void 0!==b.gcy){F.gcy=b.gcy;var Ca=!0}var K=new Qa({root:a.root,store:a.store,slots:{default:Z()},data:F,_bind(b,c){var d={};!x&&b.scale&&(d.scale=c.scale);
!w&&b.translateX&&(d.translateX=c.translateX);!O&&b.translateY&&(d.translateY=c.translateY);!y&&b.mouseOver&&(d.mouseOver=c.mouseOver);!G&&b.mouseGlobalPosition&&(d.mouseGlobalPosition=c.mouseGlobalPosition);!C&&b.extent&&(d.extent=c.extent);!M&&b.scrollWheel&&(d.scrollWheel=c.scrollWheel);!Ba&&b.disableBehaviors&&(d.disableBehaviors=c.disableBehaviors);!E&&b.gcx&&(d.gcx=c.gcx);!Ca&&b.gcy&&(d.gcy=c.gcy);a._set(d);Ca=E=Ba=M=C=G=y=O=w=x=void 0}});a.root._beforecreate.push(()=>{K._bind({scale:1,translateX:1,
translateY:1,mouseOver:1,mouseGlobalPosition:1,extent:1,scrollWheel:1,disableBehaviors:1,gcx:1,gcy:1},K.get())});a.refs.d3Zoom=K;return{c(){ha._fragment.c();d=n("\n\n\n");B&&B.c();e=n("\n\n");f=k("div");g=k("canvas");p=n("\n    ");m=k("canvas");t=n("\n    ");z&&z.c();u=document.createComment("");K._fragment.c();g.width=h=b.viewWidth*b.screenResolution;g.height=l=b.viewHeight*b.screenResolution;g.className="svelte-w9b5xg svelte-ref-canvas";m.width=q=b.viewWidth*b.screenResolution;m.height=r=b.viewHeight*
b.screenResolution;m.className="svelte-w9b5xg svelte-ref-labelsCanvas";f.className="svelte-w9b5xg svelte-ref-root"},m(b,c){ha._mount(b,c);b.insertBefore(d,c);B&&B.m(b,c);b.insertBefore(e,c);b.insertBefore(f,c);K._slotted.default.appendChild(g);a.refs.canvas=g;K._slotted.default.appendChild(p);K._slotted.default.appendChild(m);a.refs.labelsCanvas=m;K._slotted.default.appendChild(t);z&&z.m(K._slotted.default,null);K._slotted.default.appendChild(u);K._mount(f,null);a.refs.root=f},p(c,d){b=d;d={};!$b&&
c.ready&&(d.ready=b.ready,$b=void 0!==b.ready);ha._set(d);$b=void 0;b.ready?B?B.p(c,b):(B=Te(a,b),B.c(),B.m(e.parentNode,e)):B&&(B.d(1),B=null);(c.viewWidth||c.screenResolution)&&h!==(h=b.viewWidth*b.screenResolution)&&(g.width=h);(c.viewHeight||c.screenResolution)&&l!==(l=b.viewHeight*b.screenResolution)&&(g.height=l);(c.viewWidth||c.screenResolution)&&q!==(q=b.viewWidth*b.screenResolution)&&(m.width=q);(c.viewHeight||c.screenResolution)&&r!==(r=b.viewHeight*b.screenResolution)&&(m.height=r);b.showHoverIcon?
z?z.p(c,b):(z=Ue(a,b),z.c(),z.m(u.parentNode,u)):z&&(z.d(1),z=null);d={};c.viewWidth&&(d.clientWidth=b.viewWidth);c.viewHeight&&(d.clientHeight=b.viewHeight);c.homeX&&(d.homeX=b.homeX);c.homeY&&(d.homeY=b.homeY);c.homeScale&&(d.homeScale=b.homeScale);!x&&c.scale&&(d.scale=b.scale,x=void 0!==b.scale);!w&&c.translateX&&(d.translateX=b.translateX,w=void 0!==b.translateX);!O&&c.translateY&&(d.translateY=b.translateY,O=void 0!==b.translateY);!y&&c.mouseOver&&(d.mouseOver=b.mouseOver,y=void 0!==b.mouseOver);
!G&&c.mouseGlobalPosition&&(d.mouseGlobalPosition=b.mouseGlobalPosition,G=void 0!==b.mouseGlobalPosition);!C&&c.extent&&(d.extent=b.extent,C=void 0!==b.extent);!M&&c.scrollWheel&&(d.scrollWheel=b.scrollWheel,M=void 0!==b.scrollWheel);!Ba&&c.disableBehaviors&&(d.disableBehaviors=b.disableBehaviors,Ba=void 0!==b.disableBehaviors);!E&&c.gcx&&(d.gcx=b.gcx,E=void 0!==b.gcx);!Ca&&c.gcy&&(d.gcy=b.gcy,Ca=void 0!==b.gcy);K._set(d);Ca=E=Ba=M=C=G=y=O=w=x=void 0},d(b){window.removeEventListener("resize",c);ha.destroy(b);
b&&v(d);B&&B.d(b);b&&(v(e),v(f));a.refs.canvas===g&&(a.refs.canvas=null);a.refs.labelsCanvas===m&&(a.refs.labelsCanvas=null);z&&z.d();K.destroy();a.refs.d3Zoom===K&&(a.refs.d3Zoom=null);a.refs.root===f&&(a.refs.root=null)}}}function Te(a,b){var c={id:b.id,layer:b.layer,layout:b.layout,classFilter:b.classFilter,filter:b.filter};if(void 0!==b.config){c.config=b.config;var d=!0}if(void 0!==b.layers){c.layers=b.layers;var e=!0}if(void 0!==b.labels){c.labels=b.labels;var f=!0}if(void 0!==b.loading){c.loading=
b.loading;var g=!0}var h=new ge({root:a.root,store:a.store,data:c,_bind(b,c){var h={};!d&&b.config&&(h.config=c.config);!e&&b.layers&&(h.layers=c.layers);!f&&b.labels&&(h.labels=c.labels);!g&&b.loading&&(h.loading=c.loading);a._set(h);g=f=e=d=void 0}});a.root._beforecreate.push(()=>{h._bind({config:1,layers:1,labels:1,loading:1},h.get())});return{c(){h._fragment.c()},m(a,b){h._mount(a,b)},p(a,c){b=c;c={};a.id&&(c.id=b.id);a.layer&&(c.layer=b.layer);a.layout&&(c.layout=b.layout);a.classFilter&&(c.classFilter=
b.classFilter);a.filter&&(c.filter=b.filter);!d&&a.config&&(c.config=b.config,d=void 0!==b.config);!e&&a.layers&&(c.layers=b.layers,e=void 0!==b.layers);!f&&a.labels&&(c.labels=b.labels,f=void 0!==b.labels);!g&&a.loading&&(c.loading=b.loading,g=void 0!==b.loading);h._set(c);g=f=e=d=void 0},d(a){h.destroy(a)}}}function Ue(a,b){var c;return{c(){c=k("div");q(c,"left",""+b.hoverIconX+"px");q(c,"top",""+b.hoverIconY+"px");q(c,"width",""+b.hoverIconW+"px");q(c,"height",""+b.hoverIconW+"px");c.className=
"svelte-w9b5xg svelte-ref-hover"},m(b,e){b.insertBefore(c,e);a.refs.hover=c},p(a,b){a.hoverIconX&&q(c,"left",""+b.hoverIconX+"px");a.hoverIconY&&q(c,"top",""+b.hoverIconY+"px");a.hoverIconW&&(q(c,"width",""+b.hoverIconW+"px"),q(c,"height",""+b.hoverIconW+"px"))},d(b){b&&v(c);a.refs.hover===c&&(a.refs.hover=null)}}}function Gc(a){x(this,a);this.refs={};this._state=r({ready:!0,id:"inceptionv1_mixed4c",config:null,layers:null,layer:0,layout:0,classFilter:0,filter:0,context:null,alphaAttributionFactor:.02,
density:1,classHeatmap:-1,classHeatmapMultiplier:1,classHeatmapPositive:1,iconCrop:.02,autoGridSizeMultiplier:.5,gridSize:null,homeX:.5,homeY:.5,homeScale:1,enableClickToZoom:!0,enableHover:!0,enableDragToPan:!0,backgroundColor:"white",strokeColor:"rgb(220, 220, 220)",strokeThickness:1,imageSmoothing:!1,fontSize:10,textColor:"white",textShadowColor:"rgba(0, 0, 0, 0.6)",showLabels:!0,screenResolution:1},a.data);this._recompute({layers:1,layer:1,viewWidth:1,screenResolution:1,viewHeight:1,scale:1,gridSize:1,
config:1,classHeatmap:1,w:1,h:1,autoGridSizeMultiplier:1,currentZoomIndex:1,labelsBufferContext:1,labels:1,fontSize:1,textColor:1,textShadowColor:1,currentLayerData:1,mouseGlobalPosition:1,translateX:1,translateY:1,hoverIconData:1,enableHover:1},this._state);this._intro=!0;this._handlers.update=[Di];this._fragment=Ei(this,this._state);this.root._oncreate.push(()=>{Ci.call(this);this.fire("update",{changed:J({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,
a.anchor),E(this))}function Fi(a,b){var c,d,e=a._slotted.head,f,g,h=a._slotted.body;return{c(){c=k("div");d=k("div");f=n("\n  ");g=k("div");d.className="head svelte-l56anp";g.className="body svelte-l56anp";c.className="root svelte-l56anp"},m(a,b){a.insertBefore(c,b);c.appendChild(d);e&&d.appendChild(e);c.appendChild(f);c.appendChild(g);h&&g.appendChild(h)},p:C,d(a){a&&v(c);e&&Aa(d,e);h&&Aa(g,h)}}}function jd(a){x(this,a);this._state=r({},a.data);this._intro=!0;this._slotted=a.slots||{};this._fragment=
Fi(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Gi({clientWidth:a,minWidth:b}){return a/Math.max(a,b)}function Hi({clientWidth:a,minWidth:b}){return Math.max(a,b)+"px"}function Ii({clientHeight:a,scale:b}){return a/b+"px"}function Ji(a,b){var c,d,e=a._slotted.default;return{c(){c=k("div");d=k("div");q(d,"transform","scale("+b.scale+")");q(d,"width",b.finalWidth);q(d,"height",""+b.finalHeight+b.style+"\n    ");d.className="svelte-fkjf8u svelte-ref-frame";
c.className="svelte-fkjf8u svelte-ref-root"},m(b,g){b.insertBefore(c,g);c.appendChild(d);e&&d.appendChild(e);a.refs.frame=d;a.refs.root=c},p(a,b){a.scale&&q(d,"transform","scale("+b.scale+")");a.finalWidth&&q(d,"width",b.finalWidth);(a.finalHeight||a.style)&&q(d,"height",""+b.finalHeight+b.style+"\n    ")},d(b){b&&v(c);e&&Aa(d,e);a.refs.frame===d&&(a.refs.frame=null);a.refs.root===c&&(a.refs.root=null)}}}function kd(a){x(this,a);this.refs={};this._state=r({style:"",aspectRatio:1,minWidth:800,clientWidth:1E3,
clientHeight:1E3},a.data);this._recompute({clientWidth:1,minWidth:1,width:1,clientHeight:1,scale:1},this._state);this._intro=!0;this._slotted=a.slots||{};this._fragment=Ji(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}function Ki({gridSize:a}){return 20*(a+1)}function Li({iconScaleFactor:a,realGridSize:b}){return 1E6/(b*b*a)}function Mi(){let {loadTarget:a}=this.get(),b=new URLSearchParams(window.location.search);if(b.has("layer")){let a=decodeURIComponent(b.get("layer"));
this.set({layerName:a})}a&&setTimeout(()=>{this.zoomTo(a.x,a.y,a.scale,0)},10);if(b.has("poi")){let a=b.get("poi").split(",").map(parseFloat);setTimeout(()=>{this.zoomTo(...a,4E3)},1E3)}}function Ni(a,b){function c(){a.set({showLabels:ab.checked})}function d(){a.set({enableHover:bb.checked})}function e(){a.store.set({scroll:cb.checked})}function f(){a.set({gridSize:R.__value})}function g(){a.set({gridSize:S.__value})}function h(){a.set({gridSize:T.__value})}function l(){a.set({gridSize:U.__value})}
function p(){a.set({gridSize:V.__value})}function m(){a.set({gridSize:W.__value})}function A(){a.set({autoGridSizeMultiplier:Nc(ka.value)})}function r(){a.set({density:Nc(la.value)})}function v(){a.set({classHeatmapPositive:X.__value})}function u(){a.set({classHeatmapPositive:Y.__value})}function F(){a.set({classHeatmapMultiplier:Nc(ma.value)})}function x(b){a.toggle()}var w,B,z,y,C,O,E,G,N,M,Ba,aa,Ca,K,oa,H,fa,ya,L,P,J,pa,db,qa,ra,ta,Q,za,eb,ab,Aa,Da,cc,bb,Ea,Fa,ja,cb,Ka,La,Ma,ia,Ga,I,va,Sa,sa,R,
Va,Wa,ua,S,Xa,Ya,wa,T,Za,$a,xa,U,hb,ib,dc,V,kb,mb,ec,W,nb,ob,Ib,Ia,qb,fc,rb,ka,ub,Tb,gc,vb,hc,wb,la,xb,ca,Ja,yb,ic,X,zb,Ab,jc,Y,Bb,Cb,Na,Db,kc,Eb,ma,Fb,Ha,Oa,Gb,Pa,Hb,Qa=Ub(b.gcx),gb,Lb,Ra,Mb,Ta=Ub(b.gcy),jb,Nb,Hc,Ob,Ic=Ub(b.scale),lb,Pb,Jc,Jb,Kc=b.showOptions?"fewer options":"more options",Lc,da=b.backLink&&Ve(a,b),Qb={};if(void 0!==b.classHeatmap){Qb.classHeatmap=b.classHeatmap;var lc=!0}var Vb=new Oc({root:a.root,store:a.store,data:Qb,_bind(b,c){var d={};!lc&&b.classHeatmap&&(d.classHeatmap=c.classHeatmap);
a._set(d);lc=void 0}});a.root._beforecreate.push(()=>{Vb._bind({classHeatmap:1},Vb.get())});var Wb=new jd({root:a.root,store:a.store,slots:{default:Z(),body:Z(),head:Z()}}),Rb={classHeatmap:b.classHeatmap};if(void 0!==b.layerName){Rb.layerName=b.layerName;var mc=!0}var Xb=new Wd({root:a.root,store:a.store,data:Rb,_bind(b,c){var d={};!mc&&b.layerName&&(d.layerName=c.layerName);a._set(d);mc=void 0}});a.root._beforecreate.push(()=>{Xb._bind({layerName:1},Xb.get())});var Yb=new jd({root:a.root,store:a.store,
slots:{default:Z(),body:Z(),head:Z()}}),ea={id:"inceptionv1_"+b.layerName,strokeColor:"#666",backgroundColor:"#dfdfdf",showHoverImage:!1,classHeatmap:b.classHeatmap,homeX:b.homeX,homeY:b.homeY,homeScale:b.homeScale};if(void 0!==b.density){ea.density=b.density;var nc=!0}if(void 0!==b.iconCrop){ea.iconCrop=b.iconCrop;var oc=!0}if(void 0!==b.classHeatmapMultiplier){ea.classHeatmapMultiplier=b.classHeatmapMultiplier;var pc=!0}if(void 0!==b.classHeatmapPositive){ea.classHeatmapPositive=b.classHeatmapPositive;
var qc=!0}if(void 0!==b.autoGridSizeMultiplier){ea.autoGridSizeMultiplier=b.autoGridSizeMultiplier;var rc=!0}if(void 0!==b.gridSize){ea.gridSize=b.gridSize;var sc=!0}if(void 0!==b.showLabels){ea.showLabels=b.showLabels;var tc=!0}if(void 0!==b.enableHover){ea.enableHover=b.enableHover;var uc=!0}if(void 0!==b.scale){ea.scale=b.scale;var vc=!0}if(void 0!==b.gcx){ea.gcx=b.gcx;var wc=!0}if(void 0!==b.gcy){ea.gcy=b.gcy;var xc=!0}if(void 0!==b.extent){ea.extent=b.extent;var yc=!0}if(void 0!==b.$scroll){ea.scrollWheel=
b.$scroll;var zc=!0}var fb=new Gc({root:a.root,store:a.store,data:ea,_bind(b,c){var d={},e={};!nc&&b.density&&(d.density=c.density);!oc&&b.iconCrop&&(d.iconCrop=c.iconCrop);!pc&&b.classHeatmapMultiplier&&(d.classHeatmapMultiplier=c.classHeatmapMultiplier);!qc&&b.classHeatmapPositive&&(d.classHeatmapPositive=c.classHeatmapPositive);!rc&&b.autoGridSizeMultiplier&&(d.autoGridSizeMultiplier=c.autoGridSizeMultiplier);!sc&&b.gridSize&&(d.gridSize=c.gridSize);!tc&&b.showLabels&&(d.showLabels=c.showLabels);
!uc&&b.enableHover&&(d.enableHover=c.enableHover);!vc&&b.scale&&(d.scale=c.scale);!wc&&b.gcx&&(d.gcx=c.gcx);!xc&&b.gcy&&(d.gcy=c.gcy);!yc&&b.extent&&(d.extent=c.extent);!zc&&b.scrollWheel&&(e.scroll=c.scrollWheel);a.store.set(e);a._set(d);zc=yc=xc=wc=vc=uc=tc=sc=rc=qc=pc=oc=nc=void 0}});a.root._beforecreate.push(()=>{fb._bind({density:1,iconCrop:1,classHeatmapMultiplier:1,classHeatmapPositive:1,autoGridSizeMultiplier:1,gridSize:1,showLabels:1,enableHover:1,scale:1,gcx:1,gcy:1,extent:1,scrollWheel:1},
fb.get())});a.refs.atlas=fb;var Sb={id:"inceptionv1_"+b.layerName,layerName:b.layerName,enableDragging:!0,classHeatmap:b.classHeatmap,scaleCountFactor:b.scaleCountFactor};if(void 0!==b.extent){Sb.extent=b.extent;var Ac=!0}var Kb=new Kd({root:a.root,store:a.store,data:Sb,_bind(b,c){var d={};!Ac&&b.extent&&(d.extent=c.extent);a._set(d);Ac=void 0}});a.root._beforecreate.push(()=>{Kb._bind({extent:1},Kb.get())});Kb.on("drag",function(b){a.refs.atlas.translateTo(b.gcx,b.gcy)});var pb=new ac({root:a.root,
store:a.store,data:{name:"home",color:"white"}}),Bc=new Fc({root:a.root,store:a.store,slots:{default:Z()}});Bc.on("click",function(b){a.refs.atlas.home(3E3)});var sb=new ac({root:a.root,store:a.store,data:{name:"add",color:"white"}}),Cc=new Fc({root:a.root,store:a.store,slots:{default:Z()}});Cc.on("click",function(b){a.refs.atlas.scaleBy(2)});var tb=new ac({root:a.root,store:a.store,data:{name:"remove",color:"white"}}),Dc=new Fc({root:a.root,store:a.store,slots:{default:Z()}});Dc.on("click",function(b){a.refs.atlas.scaleBy(.5)});
var na=b.shareLink&&We(a,b),bc={clientWidth:b.clientWidth,clientHeight:b.clientHeight,minWidth:768},Ec=new kd({root:a.root,store:a.store,slots:{default:Z()},data:bc});return{c(){w=k("div");B=k("aside");da&&da.c();z=n("\n    ");y=k("div");C=k("div");O=k("h2");O.textContent="Class Filter";E=n("\n          ");G=k("div");Vb._fragment.c();Wb._fragment.c();N=n("\n      ");M=k("div");Ba=k("h2");Ba.textContent="Layer";aa=n("\n          ");Ca=k("div");Xb._fragment.c();Yb._fragment.c();K=n("\n  ");oa=k("div");
H=k("div");fb._fragment.c();fa=n("\n        ");ya=k("div");L=k("div");P=k("div");J=k("div");Kb._fragment.c();pa=n("\n            ");db=k("div");pb._fragment.c();Bc._fragment.c();qa=n("\n              ");sb._fragment.c();Cc._fragment.c();ra=n("\n              ");tb._fragment.c();Dc._fragment.c();ta=n("\n          ");Q=k("div");za=k("div");eb=k("label");ab=k("input");Aa=n(" attribution labels");Da=n("\n              ");cc=k("label");bb=k("input");Ea=n(" show tooltip");Fa=n("\n              ");ja=k("label");
cb=k("input");Ka=n(" scroll to zoom");La=n("\n              ");na&&na.c();Ma=n("\n            ");ia=k("div");Ga=k("div");I=k("div");va=k("h3");va.textContent="Grid size";Sa=n("\n                  ");sa=k("label");R=k("input");Va=n(" 20x20");Wa=n("\n                  ");ua=k("label");S=k("input");Xa=n(" 40x40");Ya=n("\n                  ");wa=k("label");T=k("input");Za=n(" 80x80");$a=n("\n                  ");xa=k("label");U=k("input");hb=n(" 160x160");ib=n("\n                  ");dc=k("label");V=
k("input");kb=n(" 320x320");mb=n("\n                  ");ec=k("label");W=k("input");nb=n(" auto");ob=n("\n                  ");Ib=k("div");Ia=k("div");qb=n("auto threshold: ");fc=k("noscript");rb=n("\n                    ");ka=k("input");ub=n("\n                ");Tb=k("div");gc=k("h3");vb=n("Icon density: ");hc=k("noscript");wb=n("\n                  ");la=k("input");xb=n("\n                ");ca=k("div");Ja=k("h3");Ja.textContent="Class filter";yb=n("\n                  ");ic=k("label");X=k("input");
zb=n(" positive influence");Ab=n("\n                  ");jc=k("label");Y=k("input");Bb=n(" negative influence");Cb=n("\n                  ");Na=k("div");Db=n("Intensity: ");kc=k("noscript");Eb=n("\n                  ");ma=k("input");Fb=n("\n                ");Ha=k("div");Oa=k("h3");Oa.textContent="Location";Gb=n("\n                  ");Pa=k("div");Hb=n("x: ");gb=n(Qa);Lb=n("\n                  ");Ra=k("div");Mb=n("y: ");jb=n(Ta);Nb=n("\n                  ");Hc=k("div");Ob=n("scale: ");lb=n(Ic);Pb=
n("\n          ");Jc=k("div");Jb=k("button");Ec._fragment.c();t(O,"slot","head");t(G,"slot","body");C.className="filter svelte-l7caws";q(C,"display",b.showClassFilter?"block":"none");t(Ba,"slot","head");t(Ca,"slot","body");M.className="stack svelte-l7caws";q(M,"display",b.showLayerChooser?"block":"none");y.className="panels svelte-l7caws";B.className="sidebar svelte-l7caws";J.className="map-container svelte-l7caws";q(J,"width","100px");q(J,"height","100px");q(J,"position","absolute");P.className=
"map svelte-l7caws";db.className="buttons svelte-l7caws";L.className="nav svelte-l7caws";ab.addEventListener("change",c,void 0);t(ab,"type","checkbox");q(eb,"white-space","nowrap");q(eb,"text-overflow","ellipsis");q(eb,"overflow","hidden");eb.className="svelte-l7caws";bb.addEventListener("change",d,void 0);t(bb,"type","checkbox");cc.className="svelte-l7caws";cb.addEventListener("change",e,void 0);t(cb,"type","checkbox");ja.className="svelte-l7caws";za.className="essential";va.className="svelte-l7caws";
a._bindingGroups[0].push(R);R.addEventListener("change",f,void 0);t(R,"type","radio");R.__value=0;R.value=R.__value;sa.className="svelte-l7caws";a._bindingGroups[0].push(S);S.addEventListener("change",g,void 0);t(S,"type","radio");S.__value=1;S.value=S.__value;ua.className="svelte-l7caws";a._bindingGroups[0].push(T);T.addEventListener("change",h,void 0);t(T,"type","radio");T.__value=2;T.value=T.__value;wa.className="svelte-l7caws";a._bindingGroups[0].push(U);U.addEventListener("change",l,void 0);
t(U,"type","radio");U.__value=3;U.value=U.__value;xa.className="svelte-l7caws";a._bindingGroups[0].push(V);V.addEventListener("change",p,void 0);t(V,"type","radio");V.__value=4;V.value=V.__value;dc.className="svelte-l7caws";a._bindingGroups[0].push(W);W.addEventListener("change",m,void 0);t(W,"type","radio");W.__value=-1;W.value=W.__value;ec.className="svelte-l7caws";ka.addEventListener("change",A,void 0);ka.addEventListener("input",A,void 0);t(ka,"type","range");ka.min=.5;ka.max=1.4;ka.step=.01;
q(Ib,"display","none");I.className="section svelte-l7caws";gc.className="svelte-l7caws";la.addEventListener("change",r,void 0);la.addEventListener("input",r,void 0);t(la,"type","range");la.min=.2;la.max=8;la.step=.01;Tb.className="section svelte-l7caws";Ja.className="svelte-l7caws";a._bindingGroups[1].push(X);X.addEventListener("change",v,void 0);t(X,"type","radio");X.__value=1;X.value=X.__value;ic.className="svelte-l7caws";a._bindingGroups[1].push(Y);Y.addEventListener("change",u,void 0);t(Y,"type",
"radio");Y.__value=-1;Y.value=Y.__value;jc.className="svelte-l7caws";ma.addEventListener("change",F,void 0);ma.addEventListener("input",F,void 0);t(ma,"type","range");ma.min="0.5";ma.max="2";ma.step="0.1";ca.className="section svelte-l7caws";q(ca,"display",-1<b.classHeatmap?"block":"none");Oa.className="svelte-l7caws";Ha.className="section svelte-l7caws";Ga.className="grid-size";ia.className="expand svelte-l7caws";Q.className="options svelte-l7caws";Jb.addEventListener("click",x,void 0);Jb.className=
"svelte-l7caws";Jc.className="expand-toggle svelte-l7caws";ya.className=Lc="controls "+(b.showOptions?"open":"closed")+" svelte-l7caws svelte-ref-controls";H.className="atlas svelte-l7caws";oa.className="main svelte-l7caws";w.className="container svelte-l7caws"},m(c,d){Ec._slotted.default.appendChild(w);w.appendChild(B);da&&da.m(B,null);B.appendChild(z);B.appendChild(y);y.appendChild(C);Wb._slotted.head.appendChild(O);Wb._slotted.default.appendChild(E);Wb._slotted.body.appendChild(G);Vb._mount(G,
null);Wb._mount(C,null);y.appendChild(N);y.appendChild(M);Yb._slotted.head.appendChild(Ba);Yb._slotted.default.appendChild(aa);Yb._slotted.body.appendChild(Ca);Xb._mount(Ca,null);Yb._mount(M,null);w.appendChild(K);w.appendChild(oa);oa.appendChild(H);fb._mount(H,null);H.appendChild(fa);H.appendChild(ya);ya.appendChild(L);L.appendChild(P);P.appendChild(J);Kb._mount(J,null);L.appendChild(pa);L.appendChild(db);pb._mount(Bc._slotted.default,null);Bc._mount(db,null);db.appendChild(qa);sb._mount(Cc._slotted.default,
null);Cc._mount(db,null);db.appendChild(ra);tb._mount(Dc._slotted.default,null);Dc._mount(db,null);ya.appendChild(ta);ya.appendChild(Q);Q.appendChild(za);za.appendChild(eb);eb.appendChild(ab);ab.checked=b.showLabels;eb.appendChild(Aa);za.appendChild(Da);za.appendChild(cc);cc.appendChild(bb);bb.checked=b.enableHover;cc.appendChild(Ea);za.appendChild(Fa);za.appendChild(ja);ja.appendChild(cb);cb.checked=b.$scroll;ja.appendChild(Ka);za.appendChild(La);na&&na.m(za,null);Q.appendChild(Ma);Q.appendChild(ia);
ia.appendChild(Ga);Ga.appendChild(I);I.appendChild(va);I.appendChild(Sa);I.appendChild(sa);sa.appendChild(R);R.checked=R.__value===b.gridSize;sa.appendChild(Va);I.appendChild(Wa);I.appendChild(ua);ua.appendChild(S);S.checked=S.__value===b.gridSize;ua.appendChild(Xa);I.appendChild(Ya);I.appendChild(wa);wa.appendChild(T);T.checked=T.__value===b.gridSize;wa.appendChild(Za);I.appendChild($a);I.appendChild(xa);xa.appendChild(U);U.checked=U.__value===b.gridSize;xa.appendChild(hb);I.appendChild(ib);I.appendChild(dc);
dc.appendChild(V);V.checked=V.__value===b.gridSize;dc.appendChild(kb);I.appendChild(mb);I.appendChild(ec);ec.appendChild(W);W.checked=W.__value===b.gridSize;ec.appendChild(nb);I.appendChild(ob);I.appendChild(Ib);Ib.appendChild(Ia);Ia.appendChild(qb);Ia.appendChild(fc);fc.insertAdjacentHTML("afterend",b.autoGridSizeMultiplier);Ib.appendChild(rb);Ib.appendChild(ka);ka.value=b.autoGridSizeMultiplier;Ga.appendChild(ub);Ga.appendChild(Tb);Tb.appendChild(gc);gc.appendChild(vb);gc.appendChild(hc);hc.insertAdjacentHTML("afterend",
b.density);Tb.appendChild(wb);Tb.appendChild(la);la.value=b.density;Ga.appendChild(xb);Ga.appendChild(ca);ca.appendChild(Ja);ca.appendChild(yb);ca.appendChild(ic);ic.appendChild(X);X.checked=X.__value===b.classHeatmapPositive;ic.appendChild(zb);ca.appendChild(Ab);ca.appendChild(jc);jc.appendChild(Y);Y.checked=Y.__value===b.classHeatmapPositive;jc.appendChild(Bb);ca.appendChild(Cb);ca.appendChild(Na);Na.appendChild(Db);Na.appendChild(kc);kc.insertAdjacentHTML("afterend",b.classHeatmapMultiplier);ca.appendChild(Eb);
ca.appendChild(ma);ma.value=b.classHeatmapMultiplier;Ga.appendChild(Fb);Ga.appendChild(Ha);Ha.appendChild(Oa);Ha.appendChild(Gb);Ha.appendChild(Pa);Pa.appendChild(Hb);Pa.appendChild(gb);Ha.appendChild(Lb);Ha.appendChild(Ra);Ra.appendChild(Mb);Ra.appendChild(jb);Ha.appendChild(Nb);Ha.appendChild(Hc);Hc.appendChild(Ob);Hc.appendChild(lb);a.refs.expand=ia;ya.appendChild(Pb);ya.appendChild(Jc);Jc.appendChild(Jb);Jb.innerHTML=Kc;a.refs.controls=ya;Ec._mount(c,d)},p(c,d){b=d;b.backLink?da?da.p(c,b):(da=
Ve(a,b),da.c(),da.m(B,z)):da&&(da.d(1),da=null);d={};!lc&&c.classHeatmap&&(d.classHeatmap=b.classHeatmap,lc=void 0!==b.classHeatmap);Vb._set(d);lc=void 0;c.showClassFilter&&q(C,"display",b.showClassFilter?"block":"none");d={};c.classHeatmap&&(d.classHeatmap=b.classHeatmap);!mc&&c.layerName&&(d.layerName=b.layerName,mc=void 0!==b.layerName);Xb._set(d);mc=void 0;c.showLayerChooser&&q(M,"display",b.showLayerChooser?"block":"none");d={};c.layerName&&(d.id="inceptionv1_"+b.layerName);c.classHeatmap&&(d.classHeatmap=
b.classHeatmap);c.homeX&&(d.homeX=b.homeX);c.homeY&&(d.homeY=b.homeY);c.homeScale&&(d.homeScale=b.homeScale);!nc&&c.density&&(d.density=b.density,nc=void 0!==b.density);!oc&&c.iconCrop&&(d.iconCrop=b.iconCrop,oc=void 0!==b.iconCrop);!pc&&c.classHeatmapMultiplier&&(d.classHeatmapMultiplier=b.classHeatmapMultiplier,pc=void 0!==b.classHeatmapMultiplier);!qc&&c.classHeatmapPositive&&(d.classHeatmapPositive=b.classHeatmapPositive,qc=void 0!==b.classHeatmapPositive);!rc&&c.autoGridSizeMultiplier&&(d.autoGridSizeMultiplier=
b.autoGridSizeMultiplier,rc=void 0!==b.autoGridSizeMultiplier);!sc&&c.gridSize&&(d.gridSize=b.gridSize,sc=void 0!==b.gridSize);!tc&&c.showLabels&&(d.showLabels=b.showLabels,tc=void 0!==b.showLabels);!uc&&c.enableHover&&(d.enableHover=b.enableHover,uc=void 0!==b.enableHover);!vc&&c.scale&&(d.scale=b.scale,vc=void 0!==b.scale);!wc&&c.gcx&&(d.gcx=b.gcx,wc=void 0!==b.gcx);!xc&&c.gcy&&(d.gcy=b.gcy,xc=void 0!==b.gcy);!yc&&c.extent&&(d.extent=b.extent,yc=void 0!==b.extent);!zc&&c.$scroll&&(d.scrollWheel=
b.$scroll,zc=void 0!==b.$scroll);fb._set(d);zc=yc=xc=wc=vc=uc=tc=sc=rc=qc=pc=oc=nc=void 0;d={};c.layerName&&(d.id="inceptionv1_"+b.layerName);c.layerName&&(d.layerName=b.layerName);c.classHeatmap&&(d.classHeatmap=b.classHeatmap);c.scaleCountFactor&&(d.scaleCountFactor=b.scaleCountFactor);!Ac&&c.extent&&(d.extent=b.extent,Ac=void 0!==b.extent);Kb._set(d);Ac=void 0;c.showLabels&&(ab.checked=b.showLabels);c.enableHover&&(bb.checked=b.enableHover);c.$scroll&&(cb.checked=b.$scroll);b.shareLink?na||(na=
We(a,b),na.c(),na.m(za,null)):na&&(na.d(1),na=null);c.gridSize&&(R.checked=R.__value===b.gridSize);c.gridSize&&(S.checked=S.__value===b.gridSize);c.gridSize&&(T.checked=T.__value===b.gridSize);c.gridSize&&(U.checked=U.__value===b.gridSize);c.gridSize&&(V.checked=V.__value===b.gridSize);c.gridSize&&(W.checked=W.__value===b.gridSize);c.autoGridSizeMultiplier&&(Mc(fc),fc.insertAdjacentHTML("afterend",b.autoGridSizeMultiplier));c.autoGridSizeMultiplier&&(ka.value=b.autoGridSizeMultiplier);c.gridSize&&
q(Ib,"display","none");c.density&&(Mc(hc),hc.insertAdjacentHTML("afterend",b.density));c.density&&(la.value=b.density);c.classHeatmapPositive&&(X.checked=X.__value===b.classHeatmapPositive);c.classHeatmapPositive&&(Y.checked=Y.__value===b.classHeatmapPositive);c.classHeatmapMultiplier&&(Mc(kc),kc.insertAdjacentHTML("afterend",b.classHeatmapMultiplier));c.classHeatmapMultiplier&&(ma.value=b.classHeatmapMultiplier);c.classHeatmap&&q(ca,"display",-1<b.classHeatmap?"block":"none");c.gcx&&Qa!==(Qa=Ub(b.gcx))&&
(gb.data=""+Qa);c.gcy&&Ta!==(Ta=Ub(b.gcy))&&(jb.data=""+Ta);c.scale&&Ic!==(Ic=Ub(b.scale))&&(lb.data=""+Ic);c.showOptions&&Kc!==(Kc=b.showOptions?"fewer options":"more options")&&(Jb.innerHTML=Kc);c.showOptions&&Lc!==(Lc="controls "+(b.showOptions?"open":"closed")+" svelte-l7caws svelte-ref-controls")&&(ya.className=Lc);d={};c.clientWidth&&(d.clientWidth=b.clientWidth);c.clientHeight&&(d.clientHeight=b.clientHeight);Ec._set(d)},d(b){da&&da.d();Vb.destroy();Wb.destroy();Xb.destroy();Yb.destroy();fb.destroy();
a.refs.atlas===fb&&(a.refs.atlas=null);Kb.destroy();pb.destroy();Bc.destroy();sb.destroy();Cc.destroy();tb.destroy();Dc.destroy();ab.removeEventListener("change",c,void 0);bb.removeEventListener("change",d,void 0);cb.removeEventListener("change",e,void 0);na&&na.d();a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(R),1);R.removeEventListener("change",f,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(S),1);S.removeEventListener("change",g,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(T),
1);T.removeEventListener("change",h,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(U),1);U.removeEventListener("change",l,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(V),1);V.removeEventListener("change",p,void 0);a._bindingGroups[0].splice(a._bindingGroups[0].indexOf(W),1);W.removeEventListener("change",m,void 0);ka.removeEventListener("change",A,void 0);ka.removeEventListener("input",A,void 0);la.removeEventListener("change",r,void 0);la.removeEventListener("input",
r,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(X),1);X.removeEventListener("change",v,void 0);a._bindingGroups[1].splice(a._bindingGroups[1].indexOf(Y),1);Y.removeEventListener("change",u,void 0);ma.removeEventListener("change",F,void 0);ma.removeEventListener("input",F,void 0);a.refs.expand===ia&&(a.refs.expand=null);Jb.removeEventListener("click",x,void 0);a.refs.controls===ya&&(a.refs.controls=null);Ec.destroy(b)}}}function Ve(a,b){var c,d;return{c(){c=k("a");d=n("\u2190 back to main article");
c.className="backlink svelte-l7caws";c.href=b.backLink},m(a,b){a.insertBefore(c,b);c.appendChild(d)},p(a,b){a.backLink&&(c.href=b.backLink)},d(a){a&&v(c)}}}function We(a,b){function c(b){a.copyShareLink()}var d;return{c(){d=k("button");d.textContent="Copy link to this view";d.addEventListener("click",c,void 0);q(d,"font-size","10px");q(d,"margin-top","4px");t(d,"href","#")},m(a,b){a.insertBefore(d,b)},d(a){a&&v(d);d.removeEventListener("click",c,void 0)}}}function gb(a){x(this,a);this.refs={};this._state=
r(r(this.store._init(["scroll"]),{layerName:"mixed4c",gridSize:1,classHeatmap:-1,iconScaleFactor:.8,iconCrop:.35,showClassFilter:!0,showLayerChooser:!0,showOptions:!0,homeX:.5,homeY:.5,homeScale:1,shareLink:!1,backLink:!1}),a.data);this.store._add(this,["scroll"]);this._recompute({gridSize:1,iconScaleFactor:1,realGridSize:1},this._state);this._bindingGroups=[[],[]];this._intro=!0;this._handlers.destroy=[td];this._fragment=Ni(this,this._state);this.root._oncreate.push(()=>{Mi.call(this);this.fire("update",
{changed:J({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),E(this))}function Oi(){setTimeout(()=>{this.refs.app.home(0)},100)}function Pi(a,b){function c(){a.set({clientWidth:d.offsetWidth,clientHeight:d.offsetHeight})}var d,e,f=new gb({root:a.root,store:a.store,data:{clientWidth:b.clientWidth,clientHeight:b.clientHeight,gridSize:-1,showLabels:!0,shareLink:!0,backLink:b.backLink}});a.refs.app=f;return{c(){d=k("div");f._fragment.c();a.root._beforecreate.push(c);
q(d,"width","100%");q(d,"height","100%")},m(a,b){a.insertBefore(d,b);f._mount(d,null);e=uf(d,c)},p(a,b){var c={};a.clientWidth&&(c.clientWidth=b.clientWidth);a.clientHeight&&(c.clientHeight=b.clientHeight);a.backLink&&(c.backLink=b.backLink);f._set(c)},d(b){b&&v(d);f.destroy();a.refs.app===f&&(a.refs.app=null);e.cancel()}}}function Xe(a){x(this,a);this.refs={};this._state=r({backLink:void 0},a.data);this._intro=!0;this._fragment=Pi(this,this._state);this.root._oncreate.push(()=>{Oi.call(this);this.fire("update",
{changed:J({},this._state),current:this._state})});a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),E(this))}function Qi({x:a,width:b,y:c,height:d,visible:e}){if(!1===e)return"display: none;";{e=document.documentElement.scrollLeft;let f=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),g=document.documentElement.clientWidth-b;d=document.documentElement.clientHeight-d;let h=Math.min(a,g),l=Math.min(c,d);a>=g&&c>=d&&(h=a-b);return`width: ${b}px; top: ${l+
f}px; left: ${h+e}px;`}}function Ri(a,b){function c(b){a.mousemove(b)}function d(b){a.hide()}var e,f;document.addEventListener("mousemove",c);document.addEventListener("scroll",d);var g=b.component&&Ye(a,b);return{c(){e=n("\n\n");f=k("div");g&&g.c();f.style.cssText=b.style;f.className="svelte-14z2oof svelte-ref-root"},m(b,c){b.insertBefore(e,c);b.insertBefore(f,c);g&&g.m(f,null);a.refs.root=f},p(b,c){c.component?g?g.p(b,c):(g=Ye(a,c),g.c(),g.m(f,null)):g&&(g.d(1),g=null);b.style&&(f.style.cssText=
c.style)},d(b){document.removeEventListener("mousemove",c);document.removeEventListener("scroll",d);b&&(v(e),v(f));g&&g.d();a.refs.root===f&&(a.refs.root=null)}}}function Ye(a,b){var c,d=b.component;if(d)var e=new d({root:a.root,store:a.store});return{c(){e&&e._fragment.c();c=document.createComment("")},m(b,d){e&&(e._mount(b,d),a.refs.component=e);b.insertBefore(c,d)},p(b,g){d!==(d=g.component)&&(e&&e.destroy(),d?(e=new d({root:a.root,store:a.store}),e._fragment.c(),e._mount(c.parentNode,c),a.refs.component=
e):(e=null,a.refs.component===e&&(a.refs.component=null)))},d(a){a&&v(c);e&&e.destroy(a)}}}function Lb(a){x(this,a);this.refs={};this._state=r({visible:!1,width:150,height:200,component:null},a.data);this._recompute({x:1,width:1,y:1,height:1,visible:1},this._state);this._intro=!0;this._fragment=Ri(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor),E(this))}function Ze(a,b,c){a=Object.create(a);a.top=b[c];a.i=c;return a}function Si(a,b){var c,d,e,f,g,h=$e(b.num_activations),
l,p,m=b.top_class_indices&&af(a,b);return{c(){c=k("div");d=k("table");m&&m.c();e=n("\n  ");f=k("div");g=n("Average of ");l=n(h);p=n(" activations");d.className="svelte-1qbcldy";q(f,"font-size","10px");q(f,"margin-top","4px");q(f,"color","#999");q(f,"text-align","right");c.className="hover svelte-1qbcldy"},m(a,b){a.insertBefore(c,b);c.appendChild(d);m&&m.m(d,null);c.appendChild(e);c.appendChild(f);f.appendChild(g);f.appendChild(l);f.appendChild(p)},p(b,c){c.top_class_indices?m?m.p(b,c):(m=af(a,c),
m.c(),m.m(d,null)):m&&(m.d(1),m=null);b.num_activations&&h!==(h=$e(c.num_activations))&&(l.data=""+h)},d(a){a&&v(c);m&&m.d()}}}function af(a,b){for(var c,d=b.top_class_indices.slice(0,5),e=[],f=0;f<d.length;f+=1)e[f]=bf(a,Ze(b,d,f));return{c(){for(var a=0;a<e.length;a+=1)e[a].c();c=document.createComment("")},m(a,b){for(var d=0;d<e.length;d+=1)e[d].m(a,b);a.insertBefore(c,b)},p(b,f){if(b.top_class_values||b.$inceptionLabels||b.top_class_indices){d=f.top_class_indices.slice(0,5);for(var g=0;g<d.length;g+=
1){let h=Ze(f,d,g);e[g]?e[g].p(b,h):(e[g]=bf(a,h),e[g].c(),e[g].m(c.parentNode,c))}for(;g<e.length;g+=1)e[g].d(1);e.length=d.length}},d(a){jb(e,a);a&&v(c)}}}function bf(a,b){var c,d,e=b.i+1,f,g,h,l,p=b.$inceptionLabels[b.top],m,A,r,t=cf(b.top_class_values[b.i]),u;return{c(){c=k("tr");d=k("td");f=n(e);g=n(".");h=n("\n        ");l=k("td");m=n(p);A=n("\n        ");r=k("td");u=n(t);q(d,"width","10px");q(d,"text-align","right");q(d,"padding-right","4px");d.className="svelte-1qbcldy";l.className=(0==b.i?
"first":"")+" svelte-1qbcldy";q(r,"text-align","right");r.className="svelte-1qbcldy"},m(a,b){a.insertBefore(c,b);c.appendChild(d);d.appendChild(f);d.appendChild(g);c.appendChild(h);c.appendChild(l);l.appendChild(m);c.appendChild(A);c.appendChild(r);r.appendChild(u)},p(a,b){(a.$inceptionLabels||a.top_class_indices)&&p!==(p=b.$inceptionLabels[b.top])&&(m.data=""+p);a.top_class_values&&t!==(t=cf(b.top_class_values[b.i]))&&(u.data=""+t)},d(a){a&&v(c)}}}function df(a){x(this,a);this._state=r(this.store._init(["inceptionLabels"]),
a.data);this.store._add(this,["inceptionLabels"]);this._intro=!0;this._handlers.destroy=[td];this._fragment=Si(this,this._state);a.target&&(this._fragment.c(),this._mount(a.target,a.anchor))}var w={destroy:function(a){this.destroy=C;this.fire("destroy");this.set=C;this._fragment.d(!1!==a);this._fragment=null;this._state={}},get:rd,fire:qd,on:sd,set:function(a){this._set(r({},a));this.root._lock||E(this.root)},_recompute:C,_set:function(a){var b=this._state,c={},d=!1;a=r(this._staged,a);this._staged=
{};for(var e in a)this._differs(a[e],b[e])&&(c[e]=d=!0);d&&(this._state=r(r({},b),a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(this.fire("state",{changed:c,current:this._state,previous:b}),this._fragment.p(c,this._state),this.fire("update",{changed:c,current:this._state,previous:b})))},_stage:function(a){r(this._staged,a)},_mount:function(a,b){this._fragment[this._fragment.i?"i":"m"](a,b||null)},_differs:pd};r(ud.prototype,{_add(a,b){this._dependents.push({component:a,
props:b})},_init(a){let b={};for(let c=0;c<a.length;c+=1){let d=a[c];b["$"+d]=this._state[d]}return b},_remove(a){let b=this._dependents.length;for(;b--;)if(this._dependents[b].component===a){this._dependents.splice(b,1);break}},_set(a,b){let c=this._state;this._state=r(r({},c),a);for(a=0;a<this._sortedComputedProperties.length;a+=1)this._sortedComputedProperties[a].update(this._state,b);this.fire("state",{changed:b,previous:c,current:this._state});this._dependents.filter((a)=>{let c={},d=!1;for(let e=
0;e<a.props.length;e+=1){let f=a.props[e];f in b&&(c["$"+f]=this._state[f],d=!0)}if(d)return a.component._stage(c),!0}).forEach((a)=>{a.component.set({})});this.fire("update",{changed:b,previous:c,current:this._state})},_sortComputedProperties(){function a(f){let g=b[f];g&&(g.deps.forEach((b)=>{if(b===e)throw Error(`Cyclical dependency detected between ${b} <-> ${f}`);a(b)}),d[f]||(d[f]=!0,c.push(g)))}let b=this._computed,c=this._sortedComputedProperties=[],d=Object.create(null),e;for(let b in this._computed)a(e=
b)},compute(a,b,c){let d,e={deps:b,update:(e,f,g)=>{var h=b.map((a)=>{a in f&&(g=!0);return e[a]});g&&(h=c.apply(null,h),this._differs(h,d)&&(d=h,f[a]=!0,e[a]=d))}};this._computed[a]=e;this._sortComputedProperties();let f=r({},this._state),g={};e.update(f,g,!0);this._set(f,g)},fire:qd,get:rd,on:sd,set(a){let b=this._state,c=this._changed={},d=!1;for(let e in a){if(this._computed[e])throw Error(`'${e}' is a read-only computed property`);this._differs(a[e],b[e])&&(c[e]=d=!0)}d&&this._set(a,c)}});var Va=
{inception:"dummy;kit fox;English setter;Siberian husky;Australian terrier;English springer;grey whale;lesser panda;Egyptian cat;ibex;Persian cat;cougar;gazelle;porcupine;sea lion;malamute;badger;Great Dane;Walker hound;Welsh springer spaniel;whippet;Scottish deerhound;killer whale;mink;African elephant;Weimaraner;soft - coated wheaten terrier;Dandie Dinmont;red wolf;Old English sheepdog;jaguar;otterhound;bloodhound;Airedale;hyena;meerkat;giant schnauzer;titi;three - toed sloth;sorrel;black - footed ferret;dalmatian;black - and - tan coonhound;papillon;skunk;Staffordshire bullterrier;Mexican hairless;Bouvier des Flandres;weasel;miniature poodle;Cardigan;malinois;bighorn;fox squirrel;colobus;tiger cat;Lhasa;impala;coyote;Yorkshire terrier;Newfoundland;brown bear;red fox;Norwegian elkhound;Rottweiler;hartebeest;Saluki;grey fox;schipperke;Pekinese;Brabancon griffon;West Highland white terrier;Sealyham terrier;guenon;mongoose;indri;tiger;Irish wolfhound;wild boar;EntleBucher;zebra;ram;French bulldog;orangutan;basenji;leopard;Bernese mountain dog;Maltese dog;Norfolk terrier;toy terrier;vizsla;cairn;squirrel monkey;groenendael;clumber;Siamese cat;chimpanzee;komondor;Afghan hound;Japanese spaniel;proboscis monkey;guinea pig;white wolf;ice bear;gorilla;borzoi;toy poodle;Kerry blue terrier;ox;Scotch terrier;Tibetan mastiff;spider monkey;Doberman;Boston bull;Greater Swiss Mountain dog;Appenzeller;Shih - Tzu;Irish water spaniel;Pomeranian;Bedlington terrier;warthog;Arabian camel;siamang;miniature schnauzer;collie;golden retriever;Irish terrier;affenpinscher;Border collie;hare;boxer;silky terrier;beagle;Leonberg;German short - haired pointer;patas;dhole;baboon;macaque;Chesapeake Bay retriever;bull mastiff;kuvasz;capuchin;pug;curly - coated retriever;Norwich terrier;flat - coated retriever;hog;keeshond;Eskimo dog;Brittany spaniel;standard poodle;Lakeland terrier;snow leopard;Gordon setter;dingo;standard schnauzer;hamster;Tibetan terrier;Arctic fox;wire - haired fox terrier;basset;water buffalo;American black bear;Angora;bison;howler monkey;hippopotamus;chow;giant panda;American Staffordshire terrier;Shetland sheepdog;Great Pyrenees;Chihuahua;tabby;marmoset;Labrador retriever;Saint Bernard;armadillo;Samoyed;bluetick;redbone;polecat;marmot;kelpie;gibbon;llama;miniature pinscher;wood rabbit;Italian greyhound;lion;cocker spaniel;Irish setter;dugong;Indian elephant;beaver;Sussex spaniel;Pembroke;Blenheim spaniel;Madagascar cat;Rhodesian ridgeback;lynx;African hunting dog;langur;Ibizan hound;timber wolf;cheetah;English foxhound;briard;sloth bear;Border terrier;German shepherd;otter;koala;tusker;echidna;wallaby;platypus;wombat;revolver;umbrella;schooner;soccer ball;accordion;ant;starfish;chambered nautilus;grand piano;laptop;strawberry;airliner;warplane;airship;balloon;space shuttle;fireboat;gondola;speedboat;lifeboat;canoe;yawl;catamaran;trimaran;container ship;liner;pirate;aircraft carrier;submarine;wreck;half track;tank;missile;bobsled;dogsled;bicycle - built -for-two;mountain bike;freight car;passenger car;barrow;shopping cart;motor scooter;forklift;electric locomotive;steam locomotive;amphibian;ambulance;beach wagon;cab;convertible;jeep;limousine;minivan;Model T;racer;sports car;go-kart;golfcart;moped;snowplow;fire engine;garbage truck;pickup;tow truck;trailer truck;moving van;police van;recreational vehicle;streetcar;snowmobile;tractor;mobile home;tricycle;unicycle;horse cart;jinrikisha;oxcart;bassinet;cradle;crib;four-poster;bookcase;china cabinet;medicine chest;chiffonier;table lamp;file;park bench;barber chair;throne;folding chair;rocking chair;studio couch;toilet seat;desk;pool table;dining table;entertainment center;wardrobe;Granny Smith;orange;lemon;fig;pineapple;banana;jackfruit;custard apple;pomegranate;acorn;hip;ear;rapeseed;corn;buckeye;organ;upright;chime;drum;gong;maraca;marimba;steel drum;banjo;cello;violin;harp;acoustic guitar;electric guitar;cornet;French horn;trombone;harmonica;ocarina;panpipe;bassoon;oboe;sax;flute;daisy;yellow lady's slipper;cliff;valley;alp;volcano;promontory;sandbar;coral reef;lakeside;seashore;geyser;hatchet;cleaver;letter opener;plane;power drill;lawn mower;hammer;corkscrew;can opener;plunger;screwdriver;shovel;plow;chain saw;cock;hen;ostrich;brambling;goldfinch;house finch;junco;indigo bunting;robin;bulbul;jay;magpie;chickadee;water ouzel;kite;bald eagle;vulture;great grey owl;black grouse;ptarmigan;ruffed grouse;prairie chicken;peacock;quail;partridge;African grey;macaw;sulphur-crested cockatoo;lorikeet;coucal;bee eater;hornbill;hummingbird;jacamar;toucan;drake;red-breasted merganser;goose;black swan;white stork;black stork;spoonbill;flamingo;American egret;little blue heron;bittern;crane;limpkin;American coot;bustard;ruddy turnstone;red - backed sandpiper;redshank;dowitcher;oystercatcher;European gallinule;pelican;king penguin;albatross;great white shark;tiger shark;hammerhead;electric ray;stingray;barracouta;coho;tench;goldfish;eel;rock beauty;anemone fish;lionfish;puffer;sturgeon;gar;loggerhead;leatherback turtle;mud turtle;terrapin;box turtle;banded gecko;common iguana;American chameleon;whiptail;agama;frilled lizard;alligator lizard;Gila monster;green lizard;African chameleon;Komodo dragon;triceratops;African crocodile;American alligator;thunder snake;ringneck snake;hognose snake;green snake;king snake;garter snake;water snake;vine snake;night snake;boa constrictor;rock python;Indian cobra;green mamba;sea snake;horned viper;diamondback;sidewinder;European fire salamander;common newt;eft;spotted salamander;axolotl;bullfrog;tree frog;tailed frog;whistle;wing;paintbrush;hand blower;oxygen mask;snorkel;loudspeaker;microphone;screen;mouse;electric fan;oil filter;strainer;space heater;stove;guillotine;barometer;rule;odometer;scale;analog clock;digital clock;wall clock;hourglass;sundial;parking meter;stopwatch;digital watch;stethoscope;syringe;magnetic compass;binoculars;projector;sunglasses;loupe;radio telescope;bow;cannon [ground];assault rifle;rifle;projectile;computer keyboard;typewriter keyboard;crane;lighter;abacus;cash machine;slide rule;desktop computer;hand - held computer;notebook;web site;harvester;thresher;printer;slot;vending machine;sewing machine;joystick;switch;hook;car wheel;paddlewheel;pinwheel;potter's wheel;gas pump;carousel;swing;reel;radiator;puck;hard disc;sunglass;pick;car mirror;solar dish;remote control;disk brake;buckle;hair slide;knot;combination lock;padlock;nail;safety pin;screw;muzzle;seat belt;ski;candle;jack - o'-lantern;spotlight;torch;neck brace;pier;tripod;maypole;mousetrap;spider web;trilobite;harvestman;scorpion;black and gold garden spider;barn spider;garden spider;black widow;tarantula;wolf spider;tick;centipede;isopod;Dungeness crab;rock crab;fiddler crab;king crab;American lobster;spiny lobster;crayfish;hermit crab;tiger beetle;ladybug;ground beetle;long - horned beetle;leaf beetle;dung beetle;rhinoceros beetle;weevil;fly;bee;grasshopper;cricket;walking stick;cockroach;mantis;cicada;leafhopper;lacewing;dragonfly;damselfly;admiral;ringlet;monarch;cabbage butterfly;sulphur butterfly;lycaenid;jellyfish;sea anemone;brain coral;flatworm;nematode;conch;snail;slug;sea slug;chiton;sea urchin;sea cucumber;iron;espresso maker;microwave;Dutch oven;rotisserie;toaster;waffle iron;vacuum;dishwasher;refrigerator;washer;Crock Pot;frying pan;wok;caldron;coffeepot;teapot;spatula;altar;triumphal arch;patio;steel arch bridge;suspension bridge;viaduct;barn;greenhouse;palace;monastery;library;apiary;boathouse;church;mosque;stupa;planetarium;restaurant;cinema;home theater;lumbermill;coil;obelisk;totem pole;castle;prison;grocery store;bakery;barbershop;bookshop;butcher shop;confectionery;shoe shop;tobacco shop;toyshop;fountain;cliff dwelling;yurt;dock;brass;megalith;bannister;breakwater;dam;chainlink fence;picket fence;worm fence;stone wall;grille;sliding door;turnstile;mountain tent;scoreboard;honeycomb;plate rack;pedestal;beacon;mashed potato;bell pepper;head cabbage;broccoli;cauliflower;zucchini;spaghetti squash;acorn squash;butternut squash;cucumber;artichoke;cardoon;mushroom;shower curtain;jean;carton;handkerchief;sandal;ashcan;safe;plate;necklace;croquet ball;fur coat;thimble;pajama;running shoe;cocktail shaker;chest;manhole cover;modem;tub;tray;balance beam;bagel;prayer rug;kimono;hot pot;whiskey jug;knee pad;book jacket;spindle;ski mask;beer bottle;crash helmet;bottlecap;tile roof;mask;maillot;Petri dish;football helmet;bathing cap;teddy bear;holster;pop bottle;photocopier;vestment;crossword puzzle;golf ball;trifle;suit;water tower;feather boa;cloak;red wine;drumstick;shield;Christmas stocking;hoopskirt;menu;stage;bonnet;meat loaf;baseball;face powder;scabbard;sunscreen;beer glass;hen-of - the - woods;guacamole;lampshade;wool;hay;bow tie;mailbag;water jug;bucket;dishrag;soup bowl;eggnog;mortar;trench coat;paddle;chain;swab;mixing bowl;potpie;wine bottle;shoji;bulletproof vest;drilling platform;binder;cardigan;sweatshirt;pot;birdhouse;hamper;ping-pong ball;pencil box;pay - phone;consomme;apron;punching bag;backpack;groom;bearskin;pencil sharpener;broom;mosquito net;abaya;mortarboard;poncho;crutch;Polaroid camera;space bar;cup;racket;traffic light;quill;radio;dough;cuirass;military uniform;lipstick;shower cap;monitor;oscilloscope;mitten;brassiere;French loaf;vase;milk can;rugby ball;paper towel;earthstar;envelope;miniskirt;cowboy hat;trolleybus;perfume;bathtub;hotdog;coral fungus;bullet train;pillow;toilet tissue;cassette;carpenter's kit;ladle;stinkhorn;lotion;hair spray;academic gown;dome;crate;wig;burrito;pill bottle;chain mail;theater curtain;window shade;barrel;washbasin;ballpoint;basketball;bath towel;cowboy boot;gown;window screen;agaric;cellular telephone;nipple;barbell;mailbox;lab coat;fire screen;minibus;packet;maze;pole;horizontal bar;sombrero;pickelhaube;rain barrel;wallet;cassette player;comic book;piggy bank;street sign;bell cote;fountain pen;Windsor tie;volleyball;overskirt;sarong;purse;bolo tie;bib;parachute;sleeping bag;television;swimming trunks;measuring cup;espresso;pizza;breastplate;shopping basket;wooden spoon;saltshaker;chocolate sauce;ballplayer;goblet;gyromitra;stretcher;water bottle;dial telephone;soap dispenser;jersey;school bus;jigsaw puzzle;plastic bag;reflex camera;diaper;Band Aid;ice lolly;velvet;tennis ball;gasmask;doormat;Loafer;ice cream;pretzel;quilt;maillot;tape player;clog;iPod;bolete;scuba diver;pitcher;matchstick;bikini;sock;CD player;lens cap;thatch;vault;beaker;bubble;cheeseburger;parallel bars;flagpole;coffee mug;rubber eraser;stole;carbonara;dumbbell".split(";")};
class Ti extends ud{}let Ra=new Ti({scroll:!1,inceptionLabels:Va.inception,currentClass:62,currentClassAtlasIndex:507,currentClassAtlasCompareIndex:507,classChoices:[9,622,665,652,288,233,188,169,80,76,62,61,7,355,990,746,791],classAtlasIndices:[982,507,62,9,169,7,80,76,235,41,2,442,450,454,930,378,582,780,901,946,791,738,736,744,489,387,388,399,721,672,6,665,652,288,355,348,804,600,605,631,643],multipleLayers:{abacus:[{layerName:"mixed3b",homeX:.8086,homeY:.4295,gridSize:3,homeScale:48},{layerName:"mixed4c",
homeX:.8593,homeY:.5814},{layerName:"mixed5b",homeX:.8183,homeY:.79,gridSize:4,homeScale:96}],plant:[{layerName:"mixed3b",homeX:.59,homeY:.64,gridSize:3,homeScale:48,caption:"You'll immediately notice that the early layer is very nonspecific in comparison to the others. The icons that emerge are of patterns and splotches of color. It is suggestive of the final class, but not particularly evocative."},{layerName:"mixed4c",homeX:.15,homeY:.4,caption:"By the middle layer, icons definitely resemble leaves, but they could be any type of plant. Attributions are focused on plants, but are a little all over the board."},
{layerName:"mixed5b",homeX:.178,homeY:.72,caption:"Here we see foliage with textures that are specific to cabbage, and curved into rounded balls. There are full heads of cabbage rather than individual leaves."}],water:[{layerName:"mixed4c",homeX:.365,homeY:.673,caption:'In mixed4c we see two different regions that have high attribution toward "sandbar": an area of <b>sandy textures</b>\u2026'},{layerName:"mixed4c",homeX:.318,homeY:.764,caption:"\u2026and a separate area of <b>watery textures</b>."},
{layerName:"mixed5b",homeX:.74,homeY:.48,caption:'In a later layer we see activations that contain <b>both</b> of those concepts when detecting "sandbar".'}]},currentClassComparisonIndex:0,classComparisons:[{id:"507_982",leftLabel:"snorkel",rightLabel:"scuba diver",left:507,right:982,annotation:[{pos:{x:7,y:8},desc:"locomotive?"}]},{id:"736_744",leftLabel:"head cabbage",rightLabel:"artichoke",left:736,right:744,annotation:[]},{id:"671_672",leftLabel:"frying pan",rightLabel:"wok",left:671,right:672,
annotation:[{pos:{x:1,y:7},desc:"noodles?"}]},{id:"777_831",leftLabel:"beer bottle",rightLabel:"wine bottle",left:777,right:831,annotation:[]},{id:"543_544",leftLabel:"computer keyboard",rightLabel:"typewriter keyboard",left:543,right:544,annotation:[]},{id:"28_205",leftLabel:"red wolf",rightLabel:"timber wolf",left:28,right:205,annotation:[]},{id:"67_62",leftLabel:"grey fox",rightLabel:"red fox",left:67,right:62,annotation:[]},{id:"1_62",leftLabel:"kit fox",rightLabel:"red fox",left:1,right:62,annotation:[]},
{id:"6_442",leftLabel:Va.inception[6],rightLabel:Va.inception[442],left:6,right:442,annotation:[{pos:{x:2,y:7},desc:"baseball?"}]}],focus1Highlight:{scale:6,x:.844,y:.49},focusHighlights:[{scale:10,x:.873,y:.585},{scale:10,x:.709,y:.579},{scale:10,x:.221,y:.862},{scale:10,x:.807,y:.667}],pois:{mammals:{layerName:"mixed4a",gridSize:2,gcx:.6295,gcy:1-.9475,scale:8},dogs:{layerName:"mixed5a",gridSize:3,gcx:.589,gcy:1-.946,scale:10},curves:{layerName:"mixed4b",gridSize:3,gcx:.5947,gcy:.3351,scale:14},
cups:{layerName:"mixed5b",gridSize:3,gcx:.35073,gcy:.862,scale:10},patterns:{layerName:"mixed4b",gridSize:3,gcx:.91579,gcy:.32406,scale:8},text:{layerName:"mixed5a",gridSize:3,gcx:.5281,gcy:.9766,scale:19},fabric:{layerName:"mixed4b",gridSize:3,gcx:.489,gcy:.2043,scale:12},clothing:{layerName:"mixed5a",gridSize:3,gcx:.743,gcy:.48,scale:12}}});var zf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;Ob.prototype=lb.prototype;lb.prototype.toString=function(){return this.fill+
this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var yd,zd={"%":function(a,b){return(100*a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:function(a){return Math.round(a).toString(10)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},
o:function(a){return Math.round(a).toString(8)},p:function(a,b){return vd(100*a,b)},r:vd,s:function(a,b){var c=kb(a,b);if(!c)return a+"";var d=c[0];c=c[1];c=c-(yd=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1;var e=d.length;return c===e?d:c>e?d+Array(c-e+1).join("0"):0<c?d.slice(0,c)+"."+d.slice(c):"0."+Array(1-c).join("0")+kb(a,Math.max(0,b+c-1))[0]},X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}},xd="y z a f p n \u00b5 m  k M G T P E Z Y".split(" "),
ld,Mb;(function(a){ld=Af(a);Mb=ld.format;return ld})({decimal:".",thousands:",",grouping:[3],currency:["$",""]});r(Fc.prototype,w);r(Ad.prototype,w);r(Bd.prototype,w);r(Cd.prototype,w);r(ac.prototype,w);ac.prototype._recompute=function(a,b){a.name&&this._differs(b.Icon,b.Icon=Ff(b))&&(a.Icon=!0)};r(mb.prototype,w);r(mb.prototype,{measure(){this.set({clientWidth:this.refs.root.offsetWidth,clientHeight:this.refs.root.offsetHeight})},up(){let {upListener:a,moveListener:b}=this.get();window.removeEventListener("pointermove",
b);window.removeEventListener("pointerup",a);this.set({cursor:"grab"})},down(a){a.preventDefault();var {enableDragging:b}=this.get();b&&this.move(a);a=this.up.bind(this);window.addEventListener("pointerup",a);b=this.move.bind(this);window.addEventListener("pointermove",b);this.set({upListener:a,moveListener:b,cursor:"grabbing"})},move(a){let {clientWidth:b,clientHeight:c}=this.get(),d=a.offsetX/b,e=a.offsetY/c;this.set({gcx:d,gcy:e,startPos:{x:a.screenX,y:a.screenY}});this.fire("drag",{gcx:d,gcy:e})}});
mb.prototype._recompute=function(a,b){if(a.clientWidth||a.extent)this._differs(b.left,b.left=Hf(b))&&(a.left=!0),this._differs(b.right,b.right=If(b))&&(a.right=!0);if(a.clientHeight||a.extent)this._differs(b.top,b.top=Jf(b))&&(a.top=!0),this._differs(b.bottom,b.bottom=Kf(b))&&(a.bottom=!0)};r(Pb.prototype,w);r(Gd.prototype,w);r(Qb.prototype,w);r(Jd.prototype,w);r(Kd.prototype,w);var Ui={destroy:Ld,get:function(a){return a?this._state[a]:this._state},fire:function(a,b){if(a=a in this._handlers&&this._handlers[a].slice())for(var c=
0;c<a.length;c+=1)a[c].call(this,b)},observe:function(a,b,c){var d=c&&c.defer?this._observers.post:this._observers.pre;(d[a]||(d[a]=[])).push(b);c&&!1===c.init||(b.__calling=!0,b.call(this,this._state[a]),b.__calling=!1);return{cancel:function(){var c=d[a].indexOf(b);~c&&d[a].splice(c,1)}}},on:function(a,b){if("teardown"===a)return this.on("destroy",b);var c=this._handlers[a]||(this._handlers[a]=[]);c.push(b);return{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}},set:function(a){this._set(nb({},
a));this.root._lock||(this.root._lock=!0,ob(this.root._beforecreate),ob(this.root._oncreate),ob(this.root._aftercreate),this.root._lock=!1)},teardown:Ld,_recompute:Rb,_set:function(a){var b=this._state,c={},d=!1,e;for(e in a)this._differs(a[e],b[e])&&(c[e]=d=!0);d&&(this._state=nb({},b,a),this._recompute(c,this._state),this._bind&&this._bind(c,this._state),this._fragment&&(Md(this,this._observers.pre,c,this._state,b),this._fragment.p(c,this._state),Md(this,this._observers.post,c,this._state,b)))},
_mount:function(a,b){this._fragment[this._fragment.i?"i":"m"](a,b||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(a,b){return a!=a?b==b:a!==b||a&&"object"===typeof a||"function"===typeof a}};let Sb=new Map;nb(Nd.prototype,{draw(){if(this.refs.canvas){let a=this.refs.canvas.getContext("2d"),{img:b,index:c,width:d,realHeight:e,columns:f,loaded:g}=this.get();a.clearRect(0,0,d,e);let h=Array.isArray(c)?c[0]*d:c%f*d,l=Array.isArray(c)?c[1]*e:Math.floor(c/f)*e;g?a.drawImage(b,
h,l,d,e,0,0,d,e):(a.fillStyle="#ccc",a.fillRect(0,0,d,e),a.fillStyle="#eee",a.textAlign="center",a.font="16px sans-serif",a.fillText("...",d/2,e/2))}}},Ui);Nd.prototype._recompute=function(a,b){(a.width||a.height)&&this._differs(b.realHeight,b.realHeight=Tf(b.width,b.height))&&(a.realHeight=!0)};var Qd={},pb={},Vi=Pd(",").parse,Wi=Pd("\t").parse;let tb=new Map,rb=new Map,sb=new Map,Td=new Map([["gif",Ia],["png",Ia],["jpeg",Ia],["jpg",Ia],["csv",function(a){return qb(a).then((a)=>Promise.resolve(Vi(a)))}],
["tsv",function(a){return qb(a).then((a)=>Promise.resolve(Wi(a)))}],["txt",qb],["text",qb],["json",function(a){return fetch(a).then(Rd).then((a)=>a.json())}]]);var vb=[235,287,237,982,507,41,176,3,2,112,158,14,442,450,454,513,523,529,930,600,605,736,744,358,756,936,942,943,366,365,367,484,483,488,489,387,388,399,411,405],ef={vm:"shan-gpu-06-vm",id:"inceptionv1_mixed3a",build_dir:"build",cloud_dir:"gs://activation-atlas-public",model:"inceptionv1",layer:"mixed3a",sample_type:"random",sample_images:1E6,
filter:4E5,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"false",steps:1024,icon_size:80,layout:"200_0.05_euclidean",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},ff={vm:"shan-gpu-06-vm",id:"inceptionv1_mixed3b",build_dir:"build",cloud_dir:"gs://activation-atlas-public",model:"inceptionv1",layer:"mixed3b",sample_type:"random",sample_images:1E6,filter:4E5,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"false",steps:1024,icon_size:80,layout:"200_0.05_euclidean",class_filter:null,
batch_size:100,x:null,y:null,alpha:!1},gf={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4a",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4a"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},hf={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4b",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",
model:"InceptionV1",layer:["mixed4b"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},jf={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed4c",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4c"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,
160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},kf={vm:"shan-gpu-07-vm",id:"inceptionv1_mixed4d",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4d"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},lf={vm:"shan-gpu-07-vm",
id:"inceptionv1_mixed4e",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed4e"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},mf={vm:"shan-gpu-08-vm",id:"inceptionv1_mixed5a",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed5a"],
sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160,320],whiten:"true",steps:1024,icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1},nf={vm:"shan-gpu-07-vm",id:"inceptionv1_mixed5b",build_dir:"build",cloud_dir:"gs://shancarter/activation-atlas/build",model:"InceptionV1",layer:["mixed5b"],sample_type:"random",sample_images:1E6,filter:null,tries:4,tile_size:10,grid_size:[20,40,80,160,320],whiten:"true",steps:1024,
icon_size:80,layout:"50_0.05_cosine",class_filter:null,batch_size:100,x:null,y:null,alpha:!1};let bg={inceptionv1_mixed3a:ef,inceptionv1_mixed3b:ff,inceptionv1_mixed4a:gf,inceptionv1_mixed4b:hf,inceptionv1_mixed4c:jf,inceptionv1_mixed4d:kf,inceptionv1_mixed4e:lf,inceptionv1_mixed5a:mf,inceptionv1_mixed5b:nf};r(ub.prototype,w);r(ub.prototype,{render(){let {grid:a,gridSize:b,icons:c,classHeatmap:d,layerName:e}=this.get(),f=this.refs.canvas.getContext("2d"),g=f.getImageData(0,0,b,b),h=g.data,l=!1,p=
!1;switch(e){case "mixed4a":p=l=!0;break;case "mixed4d":l=!0;p=!1;break;case "mixed5a":l=!0;p=!1;break;case "mixed5b":l=!0,p=!1}for(let e of c){var m=1;-1<d&&(m=vb.indexOf(d),m=Math.max(.1,20*Math.max(0,e.f[m])));h[(l?b-e.x-1:e.x)*b*4+4*(p?b-e.y-1:e.y)+3]=40+e.n/Math.pow(a+1,2)*b*b*(20<b?8E-4:1.5E-4)*m}f.putImageData(g,0,0)}});ub.prototype._recompute=function(a,b){a.clientWidth&&this._differs(b.height,b.height=Zf(b))&&(a.height=!0);(a.model||a.layerName)&&this._differs(b.id,b.id=$f(b))&&(a.id=!0)};
r(Wd.prototype,w);r(Oc.prototype,w);Oc.prototype._recompute=function(a,b){a.inceptionLabels&&this._differs(b.labels,b.labels=fg(b))&&(a.labels=!0)};var ae={},bc={},Xi=$d(",").parse,Yi=$d("\t").parse;let Qc=new Map,Ja=new Map,Pc=new Map,ee=new Map([["gif",wb],["png",wb],["jpeg",wb],["jpg",wb],["csv",function(a){return xb(a).then((a)=>Promise.resolve(Xi(a)))}],["tsv",function(a){return xb(a).then((a)=>Promise.resolve(Yi(a)))}],["txt",xb],["text",xb],["json",function(a){return fetch(a).then(be).then((a)=>
a.json())}]]);(function(a){1===a.length&&(a=jg(a));return{left:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var f=d+e>>>1;0>a(b[f],c)?d=f+1:e=f}return d},right:function(b,c,d,e){null==d&&(d=0);null==e&&(e=b.length);for(;d<e;){var f=d+e>>>1;0<a(b[f],c)?e=f:d=f+1}return d}}})(fe);let lg={inceptionv1_mixed3a:ef,inceptionv1_mixed3b:ff,inceptionv1_mixed4a:gf,inceptionv1_mixed4b:hf,inceptionv1_mixed4c:jf,inceptionv1_mixed4d:kf,inceptionv1_mixed4e:lf,inceptionv1_mixed5a:mf,inceptionv1_mixed5b:nf};
r(ge.prototype,w);var ng={value:function(){}};yb.prototype=Rc.prototype={constructor:yb,on:function(a,b){var c=this._,d=mg(a+"",c),e,f=-1,g=d.length;if(2>arguments.length)for(;++f<g;){var h;if(h=e=(a=d[f]).type){a:{h=c[e];for(var l=0,p=h.length;l<p;++l)if((e=h[l]).name===a.name){e=e.value;break a}e=void 0}h=e}if(h)return e}else{if(null!=b&&"function"!==typeof b)throw Error("invalid callback: "+b);for(;++f<g;)if(e=(a=d[f]).type)c[e]=he(c[e],a.name,b);else if(null==b)for(e in c)c[e]=he(c[e],a.name,
null);return this}},copy:function(){var a={},b=this._,c;for(c in b)a[c]=b[c].slice();return new yb(a)},call:function(a,b){if(0<(e=arguments.length-2))for(var c=Array(e),d=0,e,f;d<e;++d)c[d]=arguments[d+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);f=this._[a];d=0;for(e=f.length;d<e;++d)f[d].value.apply(b,c)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);a=this._[a];for(var d=0,e=a.length;d<e;++d)a[d].value.apply(b,c)}};var ie={svg:"http://www.w3.org/2000/svg",
xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},of=function(a){return function(){return this.matches(a)}};if("undefined"!==typeof document){var hb=document.documentElement;if(!hb.matches){var Zi=hb.webkitMatchesSelector||hb.msMatchesSelector||hb.mozMatchesSelector||hb.oMatchesSelector;of=function(a){return function(){return Zi.call(this,a)}}}}var pf=of;Ab.prototype={constructor:Ab,appendChild:function(a){return this._parent.insertBefore(a,
this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};me.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){a=this._names.indexOf(a);0<=a&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return 0<=
this._names.indexOf(a)}};var qe={},u=null;"undefined"!==typeof document&&("onmouseenter"in document.documentElement||(qe={mouseenter:"mouseover",mouseleave:"mouseout"}));var se=[null];N.prototype=La.prototype={constructor:N,select:function(a){"function"!==typeof a&&(a=Sc(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f=b[e],g=f.length,h=d[e]=Array(g),l,p,m=0;m<g;++m)(l=f[m])&&(p=a.call(l,l.__data__,m,f))&&("__data__"in l&&(p.__data__=l.__data__),h[m]=p);return new N(d,this._parents)},
selectAll:function(a){"function"!==typeof a&&(a=ke(a));for(var b=this._groups,c=b.length,d=[],e=[],f=0;f<c;++f)for(var g=b[f],h=g.length,l,p=0;p<h;++p)if(l=g[p])d.push(a.call(l,l.__data__,p,g)),e.push(l);return new N(d,e)},filter:function(a){"function"!==typeof a&&(a=pf(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f=b[e],g=f.length,h=d[e]=[],l,p=0;p<g;++p)(l=f[p])&&a.call(l,l.__data__,p,f)&&h.push(l);return new N(d,this._parents)},data:function(a,b){if(!a)return q=Array(this.size()),
p=-1,this.each(function(a){q[++p]=a}),q;var c=b?ug:tg,d=this._parents,e=this._groups;"function"!==typeof a&&(a=sg(a));for(var f=e.length,g=Array(f),h=Array(f),l=Array(f),p=0;p<f;++p){var m=d[p],k=e[p],n=k.length,q=a.call(m,m&&m.__data__,p,d),r=q.length,t=h[p]=Array(r),u=g[p]=Array(r);n=l[p]=Array(n);c(m,k,t,u,n,q,b);k=m=0;for(var v;m<r;++m)if(n=t[m]){for(m>=k&&(k=m+1);!(v=u[k])&&++k<r;);n._next=v||null}}g=new N(g,d);g._enter=h;g._exit=l;return g},enter:function(){return new N(this._enter||this._groups.map(le),
this._parents)},exit:function(){return new N(this._exit||this._groups.map(le),this._parents)},merge:function(a){var b=this._groups;a=a._groups;for(var c=b.length,d=Math.min(c,a.length),e=Array(c),f=0;f<d;++f)for(var g=b[f],h=a[f],l=g.length,p=e[f]=Array(l),m,k=0;k<l;++k)if(m=g[k]||h[k])p[k]=m;for(;f<c;++f)e[f]=b[f];return new N(e,this._parents)},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d=a[b],e=d.length-1,f=d[e],g;0<=--e;)if(g=d[e])f&&f!==g.nextSibling&&f.parentNode.insertBefore(g,
f),f=g;return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=vg);for(var c=this._groups,d=c.length,e=Array(d),f=0;f<d;++f){for(var g=c[f],h=g.length,l=e[f]=Array(h),p,m=0;m<h;++m)if(p=g[m])l[m]=p;l.sort(b)}return(new N(e,this._parents)).order()},call:function(){var a=arguments[0];arguments[0]=this;a.apply(null,arguments);return this},nodes:function(){var a=Array(this.size()),b=-1;this.each(function(){a[++b]=this});return a},node:function(){for(var a=this._groups,
b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,f=d.length;e<f;++e){var g=d[e];if(g)return g}return null},size:function(){var a=0;this.each(function(){++a});return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;c<d;++c)for(var e=b[c],f=0,g=e.length,h;f<g;++f)(h=e[f])&&a.call(h,h.__data__,f,e);return this},attr:function(a,b){var c=zb(a);if(2>arguments.length){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==
b?c.local?xg:wg:"function"===typeof b?c.local?Bg:Ag:c.local?zg:yg)(c,b))},style:function(a,b,c){return 1<arguments.length?this.each((null==b?Cg:"function"===typeof b?Eg:Dg)(a,b,null==c?"":c)):Ka(this.node(),a)},property:function(a,b){return 1<arguments.length?this.each((null==b?Fg:"function"===typeof b?Hg:Gg)(a,b)):this.node()[a]},classed:function(a,b){var c=(a+"").trim().split(/^|\s+/);if(2>arguments.length){for(var d=Tc(this.node()),e=-1,f=c.length;++e<f;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"===
typeof b?Kg:b?Ig:Jg)(c,b))},text:function(a){return arguments.length?this.each(null==a?Lg:("function"===typeof a?Ng:Mg)(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?Og:("function"===typeof a?Qg:Pg)(a)):this.node().innerHTML},raise:function(){return this.each(Rg)},lower:function(){return this.each(Sg)},append:function(a){var b="function"===typeof a?a:je(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,
b){var c="function"===typeof a?a:je(a),d=null==b?Tg:"function"===typeof b?b:Sc(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(Ug)},clone:function(a){return this.select(a?Wg:Vg)},datum:function(a){return arguments.length?this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d=Yg(a+""),e=d.length,f;if(2>arguments.length){var g=this.node().__on;if(g)for(var h=0,l=g.length,p;h<l;++h){var m=
0;for(p=g[h];m<e;++m)if((f=d[m]).type===p.type&&f.name===p.name)return p.value}}else{g=b?$g:Zg;null==c&&(c=!1);for(m=0;m<e;++m)this.each(g(d[m],b,c));return this}},dispatch:function(a,b){return this.each(("function"===typeof b?bh:ah)(a,b))}};var Sa=1/.7,eh=/^#([0-9a-f]{3})$/,fh=/^#([0-9a-f]{6})$/,gh=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,hh=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ih=
/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,jh=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,kh=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,lh=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
ze={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ma(ta,ua,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}});Ma(y,Wc,Wa(ta,{brighter:function(a){a=null==a?Sa:Math.pow(Sa,a);return new y(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new y(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},
displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},hex:function(){return"#"+Xc(this.r)+Xc(this.g)+Xc(this.b)},toString:function(){var a=this.opacity;a=isNaN(a)?1:Math.max(0,Math.min(1,a));return(1===a?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}}));Ma(L,function(a,b,
c,d){return 1===arguments.length?mh(a):new L(a,b,c,null==d?1:d)},Wa(ta,{brighter:function(a){a=null==a?Sa:Math.pow(Sa,a);return new L(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new L(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l;b=c+(.5>c?c:1-c)*b;c=2*c-b;return new y(Yc(240<=a?a-240:a+120,c,b),Yc(a,c,b),Yc(120>a?a+240:a-120,c,b),this.opacity)},displayable:function(){return(0<=
this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var Ae=Math.PI/180,De=180/Math.PI,Ce=4/29,ia=6/29,Be=3*ia*ia,nh=ia*ia*ia;Ma(P,function(a,b,c,d){return 1===arguments.length?Zc(a):new P(a,b,c,null==d?1:d)},Wa(ta,{brighter:function(a){return new P(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new P(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?
a:a-this.b/200;b=.96422*bd(b);a=1*bd(a);c=.82521*bd(c);return new y(cd(3.1338561*b-1.6168667*a-.4906146*c),cd(-.9787684*b+1.9161415*a+.033454*c),cd(.0719453*b-.2289914*a+1.4052427*c),this.opacity)}}));Ma(pa,function(a,b,c,d){return 1===arguments.length?oh(a):new pa(a,b,c,null==d?1:d)},Wa(ta,{brighter:function(a){return new pa(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new pa(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return Zc(this).rgb()}}));
var qf=1.78277*-.29227-.1347134789;Ma(Ea,function(a,b,c,d){if(1===arguments.length){var e=a;if(e instanceof Ea)e=new Ea(e.h,e.s,e.l,e.opacity);else{e instanceof y||(e=Vc(e));var f=e.g/255,g=e.b/255,h=(qf*g+e.r/255*-1.7884503806-3.5172982438*f)/(qf+-1.7884503806-3.5172982438);g-=h;var l=(1.97294*(f-h)- -.29227*g)/-.90649;g=(f=Math.sqrt(l*l+g*g)/(1.97294*h*(1-h)))?Math.atan2(l,g)*De-120:NaN;e=new Ea(0>g?g+360:g,f,h,e.opacity)}}else e=new Ea(a,b,c,null==d?1:d);return e},Wa(ta,{brighter:function(a){a=
null==a?Sa:Math.pow(Sa,a);return new Ea(this.h,this.s,this.l*a,this.opacity)},darker:function(a){a=null==a?.7:Math.pow(.7,a);return new Ea(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=isNaN(this.h)?0:(this.h+120)*Ae,b=+this.l,c=isNaN(this.s)?0:this.s*b*(1-b),d=Math.cos(a);a=Math.sin(a);return new y(255*(b+c*(-.14861*d+1.78277*a)),255*(b+c*(-.29227*d+-.90649*a)),255*(b+1.97294*c*d),this.opacity)}}));var Pe=function c(b){function d(b,c){var d=e((b=Wc(b)).r,(c=Wc(c)).r),f=e(b.g,c.g),g=
e(b.b,c.b),m=Fe(b.opacity,c.opacity);return function(c){b.r=d(c);b.g=f(c);b.b=g(c);b.opacity=m(c);return b+""}}var e=rh(b);d.gamma=c;return d}(1),dd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ed=new RegExp(dd.source,"g"),He=180/Math.PI,md={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ib,nd,rf,Ta,$i=Ie(function(b){if("none"===b)return md;ib||(ib=document.createElement("DIV"),nd=document.documentElement,rf=document.defaultView);ib.style.transform=b;b=rf.getComputedStyle(nd.appendChild(ib),
null).getPropertyValue("transform");nd.removeChild(ib);b=b.slice(7,-1).split(",");return Ge(+b[0],+b[1],+b[2],+b[3],+b[4],+b[5])},"px, ","px)","deg)"),aj=Ie(function(b){if(null==b)return md;Ta||(Ta=document.createElementNS("http://www.w3.org/2000/svg","g"));Ta.setAttribute("transform",b);if(!(b=Ta.transform.baseVal.consolidate()))return md;b=b.matrix;return Ge(b.a,b.b,b.c,b.d,b.e,b.f)},", ",")",")"),Xa=Math.SQRT2,va=0,wa=0,$a=0,Fb,Za,Eb=0,Fa=0,Na=0,Ya="object"===typeof performance&&performance.now?
performance:Date,Ke="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(b){setTimeout(b,17)};Db.prototype=Le.prototype={constructor:Db,restart:function(b,c,d){if("function"!==typeof b)throw new TypeError("callback is not a function");d=(null==d?Cb():+d)+(null==c?0:+c);this._next||Za===this||(Za?Za._next=this:Fb=this,Za=this);this._call=b;this._time=d;fd()},stop:function(){this._call&&(this._call=null,this._time=Infinity,fd())}};var zh=Rc("start",
"end","interrupt"),Ah=[],bj=La.prototype.constructor,sf=0,sa=La.prototype;qa.prototype=function(b){return La().transition(b)}.prototype={constructor:qa,select:function(b){var c=this._name,d=this._id;"function"!==typeof b&&(b=Sc(b));for(var e=this._groups,f=e.length,g=Array(f),h=0;h<f;++h)for(var l=e[h],p=l.length,m=g[h]=Array(p),k,n,q=0;q<p;++q)(k=l[q])&&(n=b.call(k,k.__data__,q,l))&&("__data__"in k&&(n.__data__=k.__data__),m[q]=n,Oa(m[q],c,d,q,m,H(k,d)));return new qa(g,this._parents,c,d)},selectAll:function(b){var c=
this._name,d=this._id;"function"!==typeof b&&(b=ke(b));for(var e=this._groups,f=e.length,g=[],h=[],l=0;l<f;++l)for(var k=e[l],m=k.length,n,q=0;q<m;++q)if(n=k[q]){for(var r=b.call(n,n.__data__,q,k),t,u=H(n,d),v=0,w=r.length;v<w;++v)(t=r[v])&&Oa(t,c,d,v,r,u);g.push(r);h.push(n)}return new qa(g,h,c,d)},filter:function(b){"function"!==typeof b&&(b=pf(b));for(var c=this._groups,d=c.length,e=Array(d),f=0;f<d;++f)for(var g=c[f],h=g.length,l=e[f]=[],k,m=0;m<h;++m)(k=g[m])&&b.call(k,k.__data__,m,g)&&l.push(k);
return new qa(e,this._parents,this._name,this._id)},merge:function(b){if(b._id!==this._id)throw Error();var c=this._groups;b=b._groups;for(var d=c.length,e=Math.min(d,b.length),f=Array(d),g=0;g<e;++g)for(var h=c[g],l=b[g],k=h.length,m=f[g]=Array(k),n,q=0;q<k;++q)if(n=h[q]||l[q])m[q]=n;for(;g<d;++g)f[g]=c[g];return new qa(f,this._parents,this._name,this._id)},selection:function(){return new bj(this._groups,this._parents)},transition:function(){for(var b=this._name,c=this._id,d=++sf,e=this._groups,
f=e.length,g=0;g<f;++g)for(var h=e[g],l=h.length,k,m=0;m<l;++m)if(k=h[m]){var n=H(k,c);Oa(k,b,d,m,h,{time:n.time+n.delay+n.duration,delay:0,duration:n.duration,ease:n.ease})}return new qa(e,this._parents,b,d)},call:sa.call,nodes:sa.nodes,node:sa.node,size:sa.size,empty:sa.empty,each:sa.each,on:function(b,c){var d=this._id;return 2>arguments.length?H(this.node(),d).on.on(b):this.each(Rh(d,b,c))},attr:function(b,c){var d=zb(b),e="transform"===d?aj:Oe;return this.attrTween(b,"function"===typeof c?(d.local?
Ih:Hh)(d,e,hd(this,"attr."+b,c)):null==c?(d.local?Eh:Dh)(d):(d.local?Gh:Fh)(d,e,c+""))},attrTween:function(b,c){var d="attr."+b;if(2>arguments.length)return(d=this.tween(d))&&d._value;if(null==c)return this.tween(d,null);if("function"!==typeof c)throw Error();var e=zb(b);return this.tween(d,(e.local?Jh:Kh)(e,c))},style:function(b,c,d){var e="transform"===(b+="")?$i:Oe;return null==c?this.styleTween(b,Th(b,e)).on("end.style."+b,Uh(b)):this.styleTween(b,"function"===typeof c?Wh(b,e,hd(this,"style."+
b,c)):Vh(b,e,c+""),d)},styleTween:function(b,c,d){var e="style."+(b+="");if(2>arguments.length)return(e=this.tween(e))&&e._value;if(null==c)return this.tween(e,null);if("function"!==typeof c)throw Error();return this.tween(e,Xh(b,c,null==d?"":d))},text:function(b){return this.tween("text","function"===typeof b?Zh(hd(this,"text",b)):Yh(null==b?"":b+""))},remove:function(){return this.on("end.remove",Sh(this._id))},tween:function(b,c){var d=this._id;b+="";if(2>arguments.length){d=H(this.node(),d).tween;
for(var e=0,f=d.length,g;e<f;++e)if((g=d[e]).name===b)return g.value;return null}return this.each((null==c?Bh:Ch)(d,b,c))},delay:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?Lh:Mh)(c,b)):H(this.node(),c).delay},duration:function(b){var c=this._id;return arguments.length?this.each(("function"===typeof b?Nh:Oh)(c,b)):H(this.node(),c).duration},ease:function(b){var c=this._id;return arguments.length?this.each(Ph(c,b)):H(this.node(),c).ease}};var od={time:null,delay:0,
duration:250,ease:function(b){return(1>=(b*=2)?b*b*b:(b-=2)*b*b+2)/2}};La.prototype.interrupt=function(b){return this.each(function(){Gb(this,b)})};La.prototype.transition=function(b){var c;if(b instanceof qa){var d=b._id;b=b._name}else d=++sf,(c=od).time=Cb(),b=null==b?null:b+"";for(var e=this._groups,f=e.length,g=0;g<f;++g)for(var h=e[g],l=h.length,k,m=0;m<l;++m)if(k=h[m]){var n=k,q=b,r=d,t=m,v=h,u;if(!(u=c))a:{u=void 0;for(var w=d;!(u=k.__transition)||!(u=u[w]);)if(!(k=k.parentNode)){u=(od.time=
Cb(),od);break a}}Oa(n,q,r,t,v,u)}return new qa(e,this._parents,b,d)};ra.prototype={constructor:ra,scale:function(b){return 1===b?this:new ra(this.k*b,this.x,this.y)},translate:function(b,c){return 0===b&0===c?this:new ra(this.k,this.x+this.k*b,this.y+this.k*c)},apply:function(b){return[b[0]*this.k+this.x,b[1]*this.k+this.y]},applyX:function(b){return b*this.k+this.x},applyY:function(b){return b*this.k+this.y},invert:function(b){return[(b[0]-this.x)/this.k,(b[1]-this.y)/this.k]},invertX:function(b){return(b-
this.x)/this.k},invertY:function(b){return(b-this.y)/this.k},rescaleX:function(b){return b.copy().domain(b.range().map(this.invertX,this).map(b.invert,b))},rescaleY:function(b){return b.copy().domain(b.range().map(this.invertY,this).map(b.invert,b))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Hb=new ra(1,0,0);Qe.prototype=ra.prototype;var fa={components:[],running:!1,add:function(b){~fa.components.indexOf(b)||(fa.components.push(b),fa.running||(fa.running=
!0,requestAnimationFrame(fa.next)))},next:function(){for(var b=window.performance.now(),c=!1,d=fa.components.length;d--;){var e=fa.components[d],f={},g=!1,h;for(h in e._currentTweens){var l=e._currentTweens[h];b>=l.end?(f[h]=l.to,delete e._currentTweens[h],l.fulfil()):(c=g=!0,b>=l.start&&(f[h]=l.value(l.ease((b-l.start)/l.duration))))}e._tweening=!0;e.set(f);e._tweening=!1;g||fa.components.splice(d,1)}c?requestAnimationFrame(fa.next):fa.running=!1}};r(Qa.prototype,w);r(Qa.prototype,{tween:function(b,
c,d){var e=this;void 0===d&&(d={});if(!this._currentTweens){this._currentTweens=Object.create(null);this._tweening=!1;var f=this.set;this.set=function(b){if(!e._tweening)for(var c in b)e._currentTweens[c]&&e._currentTweens[c].abort();f.call(e,b)}}this._currentTweens[b]&&this._currentTweens[b].abort();var g=window.performance.now()+(d.delay||0),h=d.duration||400,l=g+h,k={key:b,value:(d.interpolate||id)(this.get()[b],c),to:c,start:g,end:l,duration:h,ease:d.easing||hi,running:!0,abort:function(){k.running=
!1;delete e._currentTweens[b]}};this._currentTweens[b]=k;fa.add(this);c=new Promise(function(b){k.fulfil=b});c.abort=k.abort;return c},zoomEventFilter:function(){let {scrollWheel:b,disableBehaviors:c}=this.get();return c?!1:b?!u.button:!("wheel"===u.type&&!1===u.ctrlKey)&&!u.button},mouseMove:function(b){this.set({msx:b.offsetX,msy:b.offsetY});let {}=this.get()},update:function(){var {el:b}=this.get();b=Qe(b);this.set({scale:b.k,transform:b,translateX:b.x,translateY:b.y})},onzoom:function(b){b.update();
b.fire("zoom")},zoomTo:function(b,c,d=1,e=1E3){let {selection:f,z:g,minSize:h,clientWidth:l,clientHeight:k}=this.get();f.transition().duration(e).call(g.transform,Hb.translate(l/2,k/2).scale(d).translate(-b*h,-c*h))},translateTo:function(b,c){let {z:d,selection:e,minSize:f}=this.get();d.translateTo(e,b*f,c*f)},home:function(b=0){let {homeX:c,homeY:d,homeScale:e}=this.get();this.zoomTo(c,d,e,b)},scaleTo:function(b,c=0){let {z:d,selection:e}=this.get();e.transition().duration(c).call(d.scaleTo,b)}});
Qa.prototype._recompute=function(b,c){(b.clientWidth||b.clientHeight)&&this._differs(c.minSize,c.minSize=ii(c))&&(b.minSize=!0);(b.msx||b.msy)&&this._differs(c.mouseOver,c.mouseOver=ji(c))&&(b.mouseOver=!0);(b.transform||b.msx||b.msy||b.clientHeight||b.clientWidth||b.minSize)&&this._differs(c.mouseGlobalPosition,c.mouseGlobalPosition=ki(c))&&(b.mouseGlobalPosition=!0);(b.scale||b.translateX||b.translateY||b.minSize||b.clientWidth||b.clientHeight)&&this._differs(c.extent,c.extent=li(c))&&(b.extent=
!0);b.extent&&(this._differs(c.gcx,c.gcx=mi(c))&&(b.gcx=!0),this._differs(c.gcy,c.gcy=ni(c))&&(b.gcy=!0))};r(Gc.prototype,w);r(Gc.prototype,{measure(){this.set({viewWidth:this.refs.root.offsetWidth,viewHeight:this.refs.root.offsetHeight})},fullscreen(){this.refs.root.webkitRequestFullscreen()},home(b=0){this.refs.d3Zoom.home(b)},translateTo(b,c){this.refs.d3Zoom.translateTo(b,c)},zoomTo(b,c,d,e=1E3){this.refs.d3Zoom.zoomTo(b,c,d,e)},transitionTo(b,c,d,e=0){this.refs.d3Zoom.transformTo(b,c,d,e)},scaleBy(b){let {scale:c}=
this.get();this.refs.d3Zoom.scaleTo(c*b,300)},iconToGlobalPosition(b,c){let {density:d,scale:e,translateX:f,translateY:g,config:h,w:l,h:k}=this.get();var m=h.grid_size[c];c=b.gw*e*Math.min(l,k);m=c*Math.min(1,Math.sqrt(d*b.num_activations/(("number"==typeof h.filter[0]?h.filter[0]:h.sample_images)/(m*m))));return{sourceX:b.localX*h.icon_size,sourceY:b.localY*h.icon_size,iconX:b.gy*e*Math.min(l,k)+f+(c-m)/2,iconY:b.gx*e*Math.min(l,k)+g+(c-m)/2,iconWidth:m}},clear(){let {viewHeight:b,viewWidth:c,context:d,
backgroundColor:e,labelsContext:f}=this.get();d.globalAlpha=1;d.fillStyle=e;d.clearRect(0,0,c,b);d.fillRect(0,0,c,b);f.globalAlpha=1;f.clearRect(0,0,c,b)},render(){let {id:b,labelsContext:c,loading:d,classHeatmap:e,showLabels:f,labels:g,labelsBufferCanvas:h,imageSmoothing:l,scale:k,w:m,h:n,translateX:q,translateY:r,context:t,config:u,layers:v,currentZoomIndex:w,strokeColor:x,strokeThickness:y,maxAttributionValue:C}=this.get();this.clear();t.imageSmoothingEnabled=l;c.strokeStyle=x;c.lineWidth=y;t.fillStyle=
"white";if(u&&v&&!d){let d=[{i:w,opacity:1}];this.set({visibleLayers:d});d.forEach((d)=>{let l=d.i;d=v[l];var p=Math.min(m,n);let u=Math.max(0,Math.floor(-(q/k/p)*d.length)),w=u+Math.ceil(m/k/p*d.length);var x=Math.max(0,Math.floor(-(r/k/p)*d.length));for(p=x+Math.ceil(n/k/p*d.length);x<=p;x++)for(let k=u;k<=w;k++)if(d[x]&&d[x][k]){let m=d[x][k],{iconX:n,iconY:p,iconWidth:q}=this.iconToGlobalPosition(m,l),r=b;{c.globalAlpha=.3;c.strokeRect(n,p,q,q);c.globalAlpha=1;var y=Math.ceil(40/q);let b=Math.ceil(60/
q);f&&g&&-1===e&&0==m.y%b&&0==m.x%y&&(c.globalAlpha=1,y=m.top_class_indices[0],c.drawImage(h,y%10*150,20*Math.floor(y/10)+4,Math.min(q*b-5,100),20,n,p+q-20-2,Math.min(q*b-5,100),20));ce(m.url).then((b)=>{let {id:c,visibleLayers:d}=this.get();if(d.reduce((b,c)=>c.i===l?b+1:b,0)&&r===c){let {config:c,classHeatmap:d,classHeatmapMultiplier:g,classHeatmapPositive:h}=this.get(),{sourceX:k,sourceY:n,iconX:p,iconY:q,iconWidth:r}=this.iconToGlobalPosition(m,l);var e=1;-1<d&&(e=m.full_class_indices.indexOf(d),
-1<e?(e=m.full_class_values[e]/C,e*=h,e=Math.max(0,e)*g):e=0);var f=Math.min(8/r,.6);t.globalAlpha=1;f=f*c.icon_size/2;-1<d&&t.fillRect(p,q,r,r);t.globalAlpha=e;t.drawImage(b,n+f,k+f,c.icon_size-2*f,c.icon_size-2*f,p,q,r,r)}})}}})}}});Gc.prototype._recompute=function(b,c){(b.layers||b.layer)&&this._differs(c.maxAttributionValue,c.maxAttributionValue=qi(c))&&(b.maxAttributionValue=!0);(b.viewWidth||b.screenResolution)&&this._differs(c.w,c.w=ri(c))&&(b.w=!0);(b.viewHeight||b.screenResolution)&&this._differs(c.h,
c.h=si(c))&&(b.h=!0);(b.scale||b.gridSize||b.config||b.classHeatmap||b.w||b.h||b.autoGridSizeMultiplier)&&this._differs(c.currentZoomIndex,c.currentZoomIndex=ti(c))&&(b.currentZoomIndex=!0);(b.currentZoomIndex||b.layers)&&this._differs(c.currentLayerData,c.currentLayerData=ui(c))&&(b.currentLayerData=!0);(b.labelsBufferContext||b.labels||b.fontSize||b.textColor||b.textShadowColor)&&this._differs(c.labelsBuffer,c.labelsBuffer=vi(c))&&(b.labelsBuffer=!0);(b.currentLayerData||b.config||b.mouseGlobalPosition||
b.w||b.h||b.translateX||b.translateY)&&this._differs(c.hoverIconData,c.hoverIconData=xi(c))&&(b.hoverIconData=!0);(b.hoverIconData||b.mouseGlobalPosition)&&this._differs(c.showHover,c.showHover=wi(c))&&(b.showHover=!0);(b.hoverIconData||b.scale||b.w||b.h||b.translateX)&&this._differs(c.hoverIconX,c.hoverIconX=yi(c))&&(b.hoverIconX=!0);(b.hoverIconData||b.scale||b.w||b.h||b.translateY)&&this._differs(c.hoverIconY,c.hoverIconY=zi(c))&&(b.hoverIconY=!0);(b.hoverIconData||b.scale||b.w||b.h)&&this._differs(c.hoverIconW,
c.hoverIconW=Ai(c))&&(b.hoverIconW=!0);(b.mouseGlobalPosition||b.hoverIconData||b.enableHover)&&this._differs(c.showHoverIcon,c.showHoverIcon=Bi(c))&&(b.showHoverIcon=!0)};r(jd.prototype,w);r(kd.prototype,w);kd.prototype._recompute=function(b,c){(b.clientWidth||b.minWidth)&&this._differs(c.scale,c.scale=Gi(c))&&(b.scale=!0);(b.clientWidth||b.width||b.minWidth)&&this._differs(c.finalWidth,c.finalWidth=Hi(c))&&(b.finalWidth=!0);(b.clientHeight||b.scale)&&this._differs(c.finalHeight,c.finalHeight=Ii(c))&&
(b.finalHeight=!0)};let tf=Mb(".3f");var Ub=tf;r(gb.prototype,w);r(gb.prototype,{home(b){this.refs.atlas.home(b)},zoomTo(b,c,d,e=1E3){this.refs.atlas.zoomTo(b,c,d,e)},toggle(){let {showOptions:b}=this.get();this.set({showOptions:!b})},copyShareLink(){var {layerName:b}=this.get();let {gcx:c,gcy:d,scale:e}=this.refs.atlas.get();b=`layer=${encodeURIComponent(b)}&poi=${[c,d,e].map(tf).join(",")}`;window.navigator.clipboard.writeText(location.protocol+"//"+location.hostname+(location.port?":"+location.port:
"")+location.pathname+"?"+b).then(function(){console.log("Copied to clipboard")},function(){console.error("Unable to copy to clipboard")})}});gb.prototype._recompute=function(b,c){b.gridSize&&this._differs(c.realGridSize,c.realGridSize=Ki(c))&&(b.realGridSize=!0);(b.iconScaleFactor||b.realGridSize)&&this._differs(c.scaleCountFactor,c.scaleCountFactor=Li(c))&&(b.scaleCountFactor=!0)};r(Xe.prototype,w);r(Lb.prototype,w);r(Lb.prototype,{mousemove:function(b){let {visible:c}=this.get();c&&this.set({x:b.clientX,
y:b.clientY})},show:function(b){this.set({visible:!0});this.refs.component.set(b)},hide:function(){this.set({visible:!1})}});Lb.prototype._recompute=function(b,c){(b.x||b.width||b.y||b.height||b.visible)&&this._differs(c.style,c.style=Qi(c))&&(b.style=!0)};var cf=Mb(".2f"),$e=Mb(",");r(df.prototype,w);Ra.set({scroll:!0});Ra.set({tooltip:new Lb({target:document.body,store:Ra,data:{width:250,component:df}})});new Xe({target:document.querySelector("#app"),store:Ra,data:{backLink:"index.html"}})})();
//# sourceMappingURL=app.min.js.map
